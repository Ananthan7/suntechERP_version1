<i class="fa fa-search searchIcon" (click)="openMasterSearch()"></i>

<ng-template #master_search let-modal>
  <div>
    <div class="border-bottom d-flex justify-content-between p-2">
      <!-- <h6>{{MasterSearch.SEARCH_HEADING}}</h6> -->
      <button type="button" class="btn btn-close close-btn p-2" (click)="close()">
        <i class="feather icon-x close-icon"></i>
      </button>
    </div>

    <div class="row p-3">
      <div class="row p-3">
        <mat-tab-group>
          <mat-tab label="Branch/ Division Selection">
            <div class="row">
              <div class="col-md-6">
                <label for="branch">Branches</label>
                <dx-data-grid width="100%" height="300px" #gridContainer id="gridContainer"
                  [allowColumnReordering]="true" [dataSource]="BranchDataSource" [showColumnLines]="true"
                  [showRowLines]="true" [showBorders]="true" [columnAutoWidth]="true" keyExpr="SRNO"
                  [selectedRowKeys]="selectedRowKeys" (onSelectionChanged)="onSelectionChanged($event)">

                  <dxo-filter-row [visible]="showFilterRow" [applyFilter]="currentFilter"></dxo-filter-row>
                  <dxo-paging [enabled]="false"></dxo-paging>
                  <dxo-selection mode="multiple"></dxo-selection>

                  <dxi-column dataField="BRANCH_CODE" width="auto" caption="Code" alignment="left"></dxi-column>
                  <dxi-column dataField="DESCRIPTION" width="auto" caption="Description" alignment="left"></dxi-column>
                </dx-data-grid>


              </div>

              <div class="col-md-6">
                <label for="divisions">Divisions</label>
                <dx-data-grid width="100%" height="300px" #gridContainer id="gridContainer"
                  [allowColumnReordering]="true" [dataSource]="divisionDataSource" [showColumnLines]="true"
                  [showRowLines]="true" [showBorders]="true" [columnAutoWidth]="true">
                  <dxo-filter-row [visible]="showFilterRow" [applyFilter]="currentFilter"></dxo-filter-row>

                  <dxi-column width="auto" dataField="SELECT1" caption="Select" cellTemplate="limitTemplate"
                    alignment="right"></dxi-column>
                  <div *dxTemplate="let data of 'limitTemplate'">
                    <mat-checkbox [checked]="data.data.checked" [disabled]="viewMode"
                      (change)="onCheckboxChange($event, data)">
                    </mat-checkbox>
                  </div>

                  <dxi-column dataField="DIVISION_CODE" width="20%" caption="Code" alignment="left">
                  </dxi-column>

                  <dxi-column dataField="DESCRIPTION" width="70%" caption="Description" alignment="left">
                  </dxi-column>

                </dx-data-grid>
              </div>
            </div>
          </mat-tab>


          <mat-tab label="Additional Filter">
            <div class="row">
              <div class="col-md-6">
                <label for="area">Area</label>
                <dx-data-grid width="100%" #gridContainer id="gridContainer" [allowColumnReordering]="true"
                  [dataSource]="areaDataSource" [showColumnLines]="true" [showRowLines]="true" [showBorders]="true"
                  [columnAutoWidth]="true">
                  <dxo-filter-row [visible]="showFilterRow" [applyFilter]="currentFilter"></dxo-filter-row>


                  <dxi-column width="auto" dataField="SELECT1" caption cellTemplate="limitTemplate"
                    alignment="center"></dxi-column>
                  <div *dxTemplate="let data of 'limitTemplate'">
                    <mat-checkbox [checked]="data.data.checked" [disabled]="viewMode"
                      (change)="onCheckboxChange($event, data)"></mat-checkbox>
                  </div>

                  <dxi-column dataField="AREA_CODE" width="20%" caption="Code" alignment="left">
                  </dxi-column>

                  <dxi-column dataField="DESCRIPTION" width="70%" caption="Description" alignment="left">
                  </dxi-column>
                </dx-data-grid>
              </div>

              <div class="col-md-6">
                <label for="Bcatgory">Business Category</label>
                <dx-data-grid width="100%" #gridContainer id="gridContainer" [allowColumnReordering]="true"
                  [dataSource]="businessCategDataSource" [showColumnLines]="true" [showRowLines]="true"
                  [showBorders]="true" [columnAutoWidth]="true">
                  <dxo-filter-row [visible]="showFilterRow" [applyFilter]="currentFilter"></dxo-filter-row>


                  <dxi-column width="auto" dataField="SELECT1" caption cellTemplate="limitTemplate"
                    alignment="center"></dxi-column>
                  <div *dxTemplate="let data of 'limitTemplate'">
                    <mat-checkbox [checked]="data.data.checked" [disabled]="viewMode"
                      (change)="onCheckboxChange($event, data)"></mat-checkbox>
                  </div>

                  <dxi-column dataField="CATEGORY_CODE" width="20%" caption="Code" alignment="left">
                  </dxi-column>

                  <dxi-column dataField="DESCRIPTION" width="70%" caption="Description" alignment="left">
                  </dxi-column>
                </dx-data-grid>
              </div>
            </div>
          </mat-tab>
        </mat-tab-group>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12" style="padding-bottom: 20px">
        <div style="text-align: right; padding: 10px">
          <button mat-flat-button color="primary" (click)="close()">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-template>