<header-panel></header-panel>
<!-- common filter -->
<master-filter (refreshData)="refreshBtnClick()" (exportExcel)="exportbtnClick()"
(exportPDF)="exportPdf()"></master-filter>
<app-loader [isLoading]="isLoading"></app-loader>
<!-- content section starts -->
<div class="row mt-3">
    <div class="col-md-4 col-sm-12">
        <span class="header cardHead">Branch Comparison for the Period Between</span>
    </div>
    <div class="col-md-7 col-sm-12">
        <form [formGroup]="dataForm">
            <div class="row">
                <div class="col-md-4  datepick">
                    <input class="form-control flatpickr-input" type="text" 
                        placeholder="From Date*" mwlFlatpickr (change)="fdateChange($event)"
                        id="rangeDate" dateFormat="Y-m-d" formControlName="fromDate">
                </div>
                <div class="col-md-4 datepick">
                    <input class="form-control flatpickr-input" type="text" 
                        placeholder="To Date*" mwlFlatpickr (change)="tdateChange($event)"
                        id="rangeDate" dateFormat="Y-m-d" formControlName="ToDate">
                </div>
                <div class="col-md-3">
                    <button class="innercard" (click)="setYtdDate()">
                        view YTD
                    </button>
                </div>
            </div>
            
        </form>
    </div>
    
</div>
<!-- table section -->
<div class="row mt-3 ps-1 d-flex" #content id="content">
    <div class="col-md-12 col-sm-12">
        <dx-data-grid id="gridContainer" [dataSource]="tabledatas" [showBorders]="true" class="mt-3"
            [columnAutoWidth]="true" [showRowLines]="true" [showColumnLines]="false" [rowAlternationEnabled]="true">
            <dxi-column dataField="BRANCH" caption="Branch"> </dxi-column>
            <dxi-column dataField="REVENUE" [customizeText]="customizeText" caption="Revenue" > </dxi-column>
            <dxi-column dataField="PY_REVENUE" [customizeText]="customizeText" caption="Previous Year Revenue"> </dxi-column>
            <dxi-column dataField="REV_INC_DEC" [customizeText]="customizeText" caption="Inc/Dec" > </dxi-column>
            <dxi-column dataField="REV_INC_DEC_PERC" caption="Inc/Dec %"> </dxi-column>
            <dxi-column dataField="GROSS_MARGIN" [customizeText]="customizeText" caption="Gross Margin"> </dxi-column>
            <dxi-column dataField="PY_GROSS_MARGIN" [customizeText]="customizeText" caption="Previous Year Gross Margin"> </dxi-column>
            <dxi-column dataField="GM_INC_DEC" caption="Inc/Dec"> </dxi-column>
            <dxi-column dataField="GM_INC_DEC_PERC" caption="Inc/Dec %"> </dxi-column>
            <dxi-column dataField="GROSS_MARGIN_PERC" caption="Gross Margin %"> </dxi-column>
            <dxi-column dataField="PY_GROSS_MARGIN_PERC" caption="Previous Year Gross Margin %"> </dxi-column>
            <dxi-column dataField="GM_PERC_INC_DEC" caption="Inc/Dec"> </dxi-column>
            <dxi-column dataField="GM_PERC_INC_DEC_PERC" caption="Inc/Dec %"> </dxi-column>
            <dxi-column dataField="QUANTITY_SOLD" [customizeText]="customizeText" caption="Quantity Sold"> </dxi-column>
            <dxi-column dataField="PY_QUANTITY_SOLD" caption="Previous Year Quantity Sold"> </dxi-column>
            <dxi-column dataField="QTY_INC_DEC" caption="Inc/Dec"> </dxi-column>
            <dxi-column dataField="QTY_INC_DEC_PERC" caption="Inc/Dec %"> </dxi-column>
            <dxi-column dataField="TOTAL_CUSTOMERS" caption="Total Customers"> </dxi-column>
            <dxi-column dataField="PY_TOTAL_CUSTOMERS" caption="Previous Year Total Customers"> </dxi-column>
            <dxi-column dataField="CUST_INC_DEC" caption="Inc/Dec"> </dxi-column>
            <dxi-column dataField="CUST_INC_DEC_PERC" caption="Inc/Dec %"> </dxi-column>
            <dxo-scrolling columnRenderingMode="virtual"></dxo-scrolling>
            <dxo-summary>
                <dxi-total-item column="BRANCH" displayFormat="Total"></dxi-total-item>
                <dxi-total-item column="REVENUE" summaryType="sum" [customizeText]="customizeText" displayFormat="{0}"></dxi-total-item>
                <dxi-total-item column="PY_REVENUE" summaryType="sum" [customizeText]="customizeText" displayFormat="{0}"></dxi-total-item>
                <dxi-total-item column="REV_INC_DEC" summaryType="sum" [customizeText]="customizeText" displayFormat="{0}"></dxi-total-item>
                <dxi-total-item column="REV_INC_DEC_PERC" summaryType="avg" [customizeText]="customizeText" displayFormat="{0}%"></dxi-total-item>
                <dxi-total-item column="GROSS_MARGIN" summaryType="sum" [customizeText]="customizeText" displayFormat="{0}"></dxi-total-item>
                <dxi-total-item column="PY_GROSS_MARGIN" summaryType="sum" [customizeText]="customizeText" displayFormat="{0}"></dxi-total-item>
                <dxi-total-item column="GM_INC_DEC" summaryType="sum" [customizeText]="customizeText" displayFormat="{0}"></dxi-total-item>
                <dxi-total-item column="GM_INC_DEC_PERC" summaryType="avg" [customizeText]="customizeText" displayFormat="{0}%"></dxi-total-item>
                <dxi-total-item column="GROSS_MARGIN_PERC" summaryType="avg" [customizeText]="customizeText" displayFormat="{0}"></dxi-total-item>
                <dxi-total-item column="PY_GROSS_MARGIN_PERC" summaryType="avg" [customizeText]="customizeText" displayFormat="{0}"></dxi-total-item>
                <dxi-total-item column="GM_PERC_INC_DEC" summaryType="avg" [customizeText]="customizeText" displayFormat="{0}"></dxi-total-item>
                <dxi-total-item column="GM_PERC_INC_DEC_PERC" summaryType="avg" [customizeText]="customizeText" displayFormat="{0}%"></dxi-total-item>
                <dxi-total-item column="QUANTITY_SOLD" summaryType="sum" [customizeText]="customizeText" displayFormat="{0}"></dxi-total-item>
                <dxi-total-item column="PY_QUANTITY_SOLD" summaryType="sum" [customizeText]="customizeText" displayFormat="{0}"></dxi-total-item>
                <dxi-total-item column="QTY_INC_DEC" summaryType="sum" [customizeText]="customizeText" displayFormat="{0}"></dxi-total-item>
                <dxi-total-item column="QTY_INC_DEC_PERC" summaryType="avg" [customizeText]="customizeText" displayFormat="{0}%"></dxi-total-item>
                <dxi-total-item column="TOTAL_CUSTOMERS" summaryType="sum" [customizeText]="customizeText" displayFormat="{0}"></dxi-total-item>
                <dxi-total-item column="PY_TOTAL_CUSTOMERS" summaryType="sum" [customizeText]="customizeText" displayFormat="{0}"></dxi-total-item>
                <dxi-total-item column="CUST_INC_DEC" summaryType="sum" [customizeText]="customizeText" displayFormat="{0}"></dxi-total-item>
                <dxi-total-item column="CUST_INC_DEC_PERC" summaryType="sum" [customizeText]="customizeText" displayFormat="{0}%"></dxi-total-item>
            </dxo-summary>
        </dx-data-grid>
    </div>
    <!-- <div class="col-md-12 col-sm-12" *ngIf="tableType=='YTD'">
        <dx-data-grid id="gridContainer" [dataSource]="ytddata" [showBorders]="true" class="mt-3"
            [columnAutoWidth]="true" [showRowLines]="true" [showColumnLines]="false" 
            [allowColumnReordering]="true" [columnMinWidth]="50"
            [columnAutoWidth]="true" [allowColumnResizing]="true"  [rowAlternationEnabled]="true">
            <dxi-column caption="Year" alignment="center">
                <dxi-column dataField="BRANCH" caption="Branch" alignment="center" > </dxi-column>
            </dxi-column>
            <dxi-column caption="2023" alignment="center">
                <dxi-column dataField="SALES" caption="Sales" alignment="center" > </dxi-column>
                <dxi-column dataField="GROSS_MARGIN" caption="GP" alignment="center" > </dxi-column>
                <dxi-column dataField="GROSS_MARGIN_PERC" caption="GP %" alignment="center" > </dxi-column>
            </dxi-column>

            <dxo-scrolling columnRenderingMode="virtual"></dxo-scrolling>
            <dxo-summary>
                <dxi-total-item column="id" displayFormat="Total"></dxi-total-item>
                <dxi-total-item column="name" summaryType="sum" displayFormat="{0}"></dxi-total-item>
                <dxi-total-item column="id1" summaryType="sum" displayFormat="{0}"></dxi-total-item>
                <dxi-total-item column="GM" summaryType="sum" displayFormat="{0}%"></dxi-total-item>
            </dxo-summary>
        </dx-data-grid>
    </div> -->
</div>