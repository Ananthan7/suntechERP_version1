<!-- header section starts -->
<div class="card-content border-bottom d-flex justify-content-between p-2">
  <h5 class="pos-modaltitle" id="modal-dia-metal">Sales Invoice</h5>
  <button type="button" class="btn btn-close close-btn" (click)="close()">
    <i class="feather icon-x close-icon"></i>
  </button>
</div>
<!-- modal header component -->
<modal-header
  *ngIf="content?.FLAG !== 'VIEW'"
  (saveClick)="formSave()"
  (cancelClick)="close()"
  [isViewDelete]="deleteMode"
  (deleteClick)="deleteMaster()"
></modal-header>
<!-- content section -->
<div class="container-fluid pt-3">
  <form [formGroup]="SalesInvoiceMainForm">
    <div class="row">
      <div class="col-md-4">
        <div class="row mb-1">
          <label for="code" class="col-sm-5 col-form-label" id="ID029"
            >Desc Code</label
          >
          <div class="col-md-7">
            <mat-form-field style="width: 100%" appearance="outline">
              <input
                maxlength="6"
                [readonly]="viewMode"
                matInput="text"
                formControlName="desc_code"
                (focusout)="descCodeCheck($event)"
              />
            </mat-form-field>
          </div>
        </div>

        <div class="row mb-1">
          <label for="code" class="col-sm-5 col-form-label" id="ID029"
            >Start From</label
          >
          <div class="col-md-4">
            <mat-form-field style="width: 100%" appearance="outline">
              <input
                [readonly]="viewMode"
                matInput="text"
                [matDatepicker]="date"
                formControlName="start_from"
              />
              <mat-datepicker-toggle
                matSuffix
                [for]="date"
              ></mat-datepicker-toggle>
              <mat-datepicker [startAt]="currentDate" #date></mat-datepicker>
            </mat-form-field>
          </div>
        </div>

        <div class="row mb-1">
          <label for="code" class="col-sm-5 col-form-label" id="ID029"
            >Division</label
          >
          <div class="col-md-4">
            <mat-form-field style="width: 100%" appearance="outline">
              <!-- <input matInput="text" formControlName="division" /> -->
              <mat-select formControlName="division">
                <mat-option
                *ngFor="let option of divisionCode"
                [value]="option.DIVISION_CODE"
              >
                {{ option.DIVISION_CODE }}
              </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <mat-radio-group
          class="pt-4"
          style="width: 100%"
          appearance="outline"
          formControlName="retail_wholesale"
        >
          <div class="row m-3">
            <div class="col-md-6">
              <mat-radio-button value="true" class="me-3"
                >Wholesale</mat-radio-button
              >
            </div>

            <div class="col-md-6">
              <mat-radio-button value="false">Retail</mat-radio-button>
            </div>
          </div>
        </mat-radio-group>
        <mat-radio-group
          class="pt-4"
          style="width: 100%"
          appearance="outline"
          formControlName="metal_diamond"
        >
          <div class="row m-3">
            <div class="col-md-6">
              <mat-radio-button class="me-3" value="true"
                >Metal</mat-radio-button
              >
            </div>

            <div class="col-md-6">
              <mat-radio-button value="false">Dimond</mat-radio-button>
            </div>
          </div>
        </mat-radio-group>
        <div class="row m-3">
          <mat-checkbox formControlName="component" id="ID006">
            Components Wise
          </mat-checkbox>
        </div>
      </div>
      <div class="col-md-4">
        <div class="row mb-1">
          <label for="code" class="col-sm-5 col-form-label" id="ID029"
            >Attr Group</label
          >
          <div class="col-md-5">
            <mat-form-field style="width: 100%" appearance="outline">
              <!-- <input matInput="text" formControlName="attr_grp" /> -->
              <mat-select formControlName="attr_grp">
                <mat-option
                *ngFor="let option of attrGroup"
                [value]="option.SRNO"
              >
                {{ option.ENGLISH }}
              </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>

        <div class="row mb-1">
          <label for="code" class="col-sm-5 col-form-label" id="ID029"
            >Comp FGroup</label
          >
          <div class="col-md-5">
            <mat-form-field style="width: 100%" appearance="outline">
              <!-- <input matInput="text" formControlName="comp_grp" /> -->
              <mat-select formControlName="comp_grp">
                <mat-option
                *ngFor="let option of compGroup"
                [value]="option.SRNO"
              >
                {{ option.ENGLISH }}
              </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>

        <div class="row mb-1">
          <label for="code" class="col-sm-5 col-form-label" id="ID029"
            >Base Price</label
          >
          <div class="col-md-5">
            <mat-form-field style="width: 100%" appearance="outline">
              <!-- <input matInput="text" formControlName="base_price" /> -->
              <mat-select formControlName="base_price">
                <mat-option
                *ngFor="let option of baseGroup"
                [value]="option.SRNO"
              >
                {{ option.ENGLISH }}
              </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>

        <div class="row mb-1">
          <div class="col-md-6"></div>
          <div class="col-md-4">
            <button
              type="button"
              class="col-md-12 p-4 mb-4 btn btn-primary text-center"
            >
              Apply
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <mat-tab-group #tabGroup>
        <mat-tab label="Group Details">
          <menu-buttons
            *ngIf="!viewMode"
            [viewAddBtn]="true"
            [viewDeleteBtn]="true"
            [viewImportBtn]="false"
            (addClick)="openRepairdetails()"
            (deleteClick)="removedata()"
          >
          </menu-buttons>

          <div class="col-md-12 mt-4">
            <div class="row">
              <dx-data-grid
                [dataSource]="groupDetailsData"
                #dataGrid
                id="gridContainer"
                keyExpr="SRNO"
                [showBorders]="true"
                (onSelectionChanged)="onSelectionChanged($event)"
              >
                <dxo-selection mode="single"></dxo-selection>
                <dxi-column dataField="SRNO" caption="SN" class="tab">
                </dxi-column>
                <dxi-column
                  dataField="DISC_GROUP1"
                  caption="Discount Group 1"
                  cellTemplate="disc_grp1"
                >
                </dxi-column>
                <dxi-column
                  dataField="DISC_GROUP2"
                  caption="Discount Group 2"
                  cellTemplate="disc_grp2"
                >
                </dxi-column>
                <dxi-column
                  dataField="DISC_PERC"
                  caption="Discount%"
                  cellTemplate="disc_per"
                >
                </dxi-column>
                <div>
                  <div *dxTemplate="let data of 'disc_grp1'">
                    <input
                      [readonly]="viewMode"
                      class="form-control"
                      type="text"
                      id="description"
                      [value]="data.value"
                      (change)="getDisc1($event, data)"
                    />
                  </div>

                  <div *dxTemplate="let data of 'disc_grp2'">
                    <input
                      [readonly]="viewMode"
                      class="form-control"
                      type="text"
                      [value]="data.value"
                      (change)="getDisc2($event, data)"
                    />
                  </div>
                  <div *dxTemplate="let data of 'disc_per'">
                    <input
                      [readonly]="viewMode"
                      class="form-control"
                      type="text"
                      [value]="data.value"
                      (change)="getDiscPer($event, data)"
                    />
                  </div>
                </div>
              </dx-data-grid>
            </div>
          </div>
        </mat-tab>
        <mat-tab label="Branch Selection">
          <div class="col-md-12 mt-4">
            <dx-data-grid
              [dataSource]="branchSelectionData"
              #dataGrid
              id="gridContainer"
              keyExpr="MID"
              [showBorders]="true"
              (onSelectionChanged)="onSelectionChanged($event)"
            >
              <!-- Paging disabled -->
              <dxo-paging [enabled]="false"></dxo-paging>

              <!-- Cell Editing Enabled -->
              <dxo-editing mode="cell" [allowUpdating]="true"></dxo-editing>

              <!-- Multiple Selection Mode -->
              <dxo-selection mode="multiple"></dxo-selection>

              <!-- Virtual Scrolling -->
              <dxo-scrolling mode="virtual"></dxo-scrolling>

              <!-- Columns Definition -->
              <dxi-column
                *ngFor="let column of salesManSelectionColumns"
                [dataField]="column.dataField"
                [caption]="column.caption"
                [allowEditing]="true"
                alignment="center"
              ></dxi-column>
            </dx-data-grid>
          </div>
        </mat-tab>
        <mat-tab label="Sales Man Selection">
          <div class="col-md-12 mt-4">
            <dx-data-grid
              [dataSource]="salesManSelectionData"
              #dataGrid
              id="gridContainer"
              keyExpr="MID"
              [showBorders]="true"
              (onSelectionChanged)="onSelectionChanged($event)"
            >
              <!-- Paging disabled -->
              <dxo-paging [enabled]="false"></dxo-paging>

              <!-- Cell Editing Enabled -->
              <dxo-editing mode="cell" [allowUpdating]="true"></dxo-editing>

              <!-- Multiple Selection Mode -->
              <dxo-selection mode="multiple"></dxo-selection>

              <!-- Virtual Scrolling -->
              <dxo-scrolling mode="virtual"></dxo-scrolling>

              <!-- Columns Definition -->
              <dxi-column
                *ngFor="let column of salesManSelectionColumns"
                [dataField]="column.dataField"
                [caption]="column.caption"
                [allowEditing]="true"
                alignment="center"
              ></dxi-column>
            </dx-data-grid>
          </div>
        </mat-tab>
      </mat-tab-group>
    </div>
  </form>
</div>
