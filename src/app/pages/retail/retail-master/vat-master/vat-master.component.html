<!-- header section starts -->
<div class="card-content border-bottom d-flex justify-content-between p-2">
  <h5 class="pos-modaltitle" id="modal-dia-metal">VAT Master</h5>
  <button type="button" class="btn btn-close close-btn" (click)="close()">
    <i class="feather icon-x close-icon"></i>
  </button>
</div>

<!-- modal header component -->
<modal-header
  [isViewMore]="!['VIEW', 'DELETE'].includes(flag)"
  (saveClick)="vatMasterMainFormSubmit()"
  (cancelClick)="close()"
  (deleteClick)="DeleteController()"
  [isViewDelete]="false"
  [isViewCancel]="!['VIEW', 'DELETE'].includes(flag)"
  [isViewSave]="!['VIEW', 'DELETE'].includes(flag)"
></modal-header>

<!-- content section -->
<div class="container-fluid pt-3">
  <form [formGroup]="vatMasterMainForm">
    <div class="row mt-2">
      <div class="col-md-12">
        <div class="row">
          <div class="col-md-3">
            <div class="row mb-1">
              <label for="vatCode" class="col-sm-4 col-form-label" id="ID029"
                >VAT Code</label
              >
              <div class="col-md-8">
                <mat-form-field style="width: 100%" appearance="outline">
                  <input
                    #codeField
                    [maxlength]="15"
                    UpperCaseDirective
                    [readonly]="flag === 'VIEW' || flag === 'EDIT'"
                    matInput
                    type="text"
                    formControlName="vatCode"
                  />
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="row mb-1">
              <label for="vatDesc" class="col-sm-3 col-form-label" id="ID029"
                >VAT Desc</label
              >
              <div class="col-md-9">
                <mat-form-field style="width: 100%" appearance="outline">
                  <input
                    [maxlength]="50"
                    (input)="descriptionValidation('vatDesc')"
                    [readonly]="flag === 'VIEW'"
                    matInput
                    type="text"
                    formControlName="vatDesc"
                  />
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="row mb-1">
              <label for="vatPercent" class="col-sm-4 col-form-label" id="ID029"
                >VAT %</label
              >
              <div class="col-md-8">
                <mat-form-field style="width: 100%" appearance="outline">
                  <input
                    (focusout)="vatPercentFocusout($event)"
                    (input)="vatPercentValidation('vatPercent')"
                    class="text-right"
                    ThreeDecimalInput
                    [readonly]="flag === 'VIEW'"
                    matInput
                    #vatPercentField
                    type="number"
                    formControlName="vatPercent"
                  />
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-md-3">
            <div class="row mb-1">
              <label for="group1" class="col-sm-4 col-form-label" id="ID029"
                >Group 1</label
              >
              <div class="col-md-8">
                <mat-form-field style="width: 100%" appearance="outline">
                  <input
                    [readonly]="flag === 'VIEW'"
                    matInput
                    type="text"
                    formControlName="group1"
                    (focusout)="
                      SPvalidateLookupFieldModified(
                        $event,
                        groupCodeData,
                        ['group1'],
                        ['CODE']
                      )
                    "
                    (keydown)="openTab($event, 'group1')"
                  />

                  <master-search
                    *ngIf="flag != 'VIEW'"
                    #overlayGroupOne
                    [MasterSearchData]="groupCodeData"
                    class="masterSearch"
                    (newRowClick)="lookupSelect($event, ['group1'], ['CODE'])"
                  ></master-search>
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="row mb-1">
              <label for="group2" class="col-sm-3 col-form-label" id="ID029"
                >Group 2</label
              >
              <div class="col-md-9">
                <mat-form-field style="width: 100%" appearance="outline">
                  <input
                    [readonly]="flag === 'VIEW'"
                    matInput
                    type="text"
                    formControlName="group2"
                    (focusout)="
                      SPvalidateLookupFieldModified(
                        $event,
                        groupCodeData,
                        ['group2'],
                        ['CODE']
                      )
                    "
                    (keydown)="openTab($event, 'group2')"
                  />

                  <master-search
                    *ngIf="flag != 'VIEW'"
                    #overlayGroupTwo
                    [MasterSearchData]="groupCodeData"
                    class="masterSearch"
                    (newRowClick)="lookupSelect($event, ['group2'], ['CODE'])"
                  ></master-search>
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="row mb-1">
              <label for="group3" class="col-sm-4 col-form-label" id="ID029"
                >Group 3</label
              >
              <div class="col-md-8">
                <mat-form-field style="width: 100%" appearance="outline">
                  <input
                    [readonly]="flag === 'VIEW'"
                    matInput
                    type="text"
                    formControlName="group3"
                    (focusout)="
                      SPvalidateLookupFieldModified(
                        $event,
                        groupCodeData,
                        ['group3'],
                        ['CODE']
                      )
                    "
                    (keydown)="openTab($event, 'group3')"
                  />

                  <master-search
                    *ngIf="flag != 'VIEW'"
                    #overlayGroupThree
                    [MasterSearchData]="groupCodeData"
                    class="masterSearch"
                    (newRowClick)="lookupSelect($event, ['group3'], ['CODE'])"
                  ></master-search>
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-md-12 mt-2">
            <mat-tab-group #tabGroup>
              <mat-tab label="Account Setting/Date Wise VAT Details">
                <div class="row pt-2">
                  <div class="col-md-4">
                    <div class="row">
                      <div class="col-md-11 border border-2 mt-2 pt-2">
                        <h4 class="text-center heading">Regular Trade</h4>
                        <div class="subHeading row border border-2 mb-1">
                          <label
                            for="mode"
                            class="text-center col-sm-4 col-form-label"
                            id="ID029"
                            >Registered
                          </label>

                          <label
                            for="mode"
                            class="text-center col-sm-4 col-form-label"
                            id="ID029"
                            >Credit</label
                          >

                          <label
                            for="mode"
                            class="text-center col-sm-4 col-form-label"
                            id="ID029"
                            >Debit</label
                          >
                        </div>

                        <div class="row mb-1">
                          <label
                            for="regVatAccCredit"
                            class="col-sm-4 col-form-label"
                            id="ID029"
                            >VAT A/C</label
                          >
                          <div class="col-md-4">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                [readonly]="flag === 'VIEW'"
                                matInput
                                type="text"
                                formControlName="regVatAccCredit"
                                (focusout)="
                                  SPvalidateLookupFieldModified(
                                    $event,
                                    VATACCodeData,
                                    ['regVatAccCredit'],
                                    ['ACCODE']
                                  )
                                "
                                (keydown)="openTab($event, 'regVatAccCredit')"
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayRegVatAccCredit
                                [MasterSearchData]="VATACCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  lookupSelect(
                                    $event,
                                    ['regVatAccCredit'],
                                    ['ACCODE']
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>

                          <div class="col-md-4">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                [readonly]="flag === 'VIEW'"
                                matInput
                                type="text"
                                formControlName="regVatAccDebit"
                                (focusout)="
                                  SPvalidateLookupFieldModified(
                                    $event,
                                    VATACCodeData,
                                    ['regVatAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                                (keydown)="openTab($event, 'regVatAccDebit')"
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayRegVatAccDebit
                                [MasterSearchData]="VATACCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  lookupSelect(
                                    $event,
                                    ['regVatAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>
                        </div>

                        <div class="row mb-1">
                          <label
                            for="regRcmAccCredit"
                            class="col-sm-4 col-form-label"
                            id="ID029"
                            >RCM A/C</label
                          >
                          <div class="col-md-4">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                [readonly]="flag === 'VIEW'"
                                matInput
                                type="text"
                                formControlName="regRcmAccCredit"
                                (focusout)="
                                  SPvalidateLookupFieldModified(
                                    $event,
                                    RCMACCodeData,
                                    ['regRcmAccCredit'],
                                    ['ACCODE']
                                  )
                                "
                                (keydown)="openTab($event, 'regRcmAccCredit')"
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayRegRcmAccCredit
                                [MasterSearchData]="RCMACCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  lookupSelect(
                                    $event,
                                    ['regRcmAccCredit'],
                                    ['ACCODE']
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>

                          <div class="col-md-4">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                [readonly]="flag === 'VIEW'"
                                matInput
                                type="text"
                                formControlName="regRcmAccDebit"
                                (focusout)="
                                  SPvalidateLookupFieldModified(
                                    $event,
                                    RCMACCodeData,
                                    ['regRcmAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                                (keydown)="openTab($event, 'regRcmAccDebit')"
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayRegRcmAccDebit
                                [MasterSearchData]="RCMACCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  lookupSelect(
                                    $event,
                                    ['regRcmAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>
                        </div>

                        <div class="row mb-1">
                          <label
                            for="regVatCtrlAccCredit"
                            class="col-sm-4 col-form-label"
                            id="ID029"
                            >VAT Ctrl. A/C</label
                          >
                          <div class="col-md-4">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                [readonly]="flag === 'VIEW'"
                                matInput
                                type="text"
                                formControlName="regVatCtrlAccCredit"
                                (focusout)="
                                  SPvalidateLookupFieldModified(
                                    $event,
                                    VATCTRLACCodeData,
                                    ['regVatCtrlAccCredit'],
                                    ['ACCODE']
                                  )
                                "
                                (keydown)="
                                  openTab($event, 'regVatCtrlAccCredit')
                                "
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayRegVatCtrlAccCredit
                                [MasterSearchData]="VATCTRLACCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  lookupSelect(
                                    $event,
                                    ['regVatCtrlAccCredit'],
                                    ['ACCODE']
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>

                          <div class="col-md-4">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                [readonly]="flag === 'VIEW'"
                                matInput
                                type="text"
                                formControlName="regVatCtrlAccDebit"
                                (focusout)="
                                  SPvalidateLookupFieldModified(
                                    $event,
                                    VATCTRLACCodeData,
                                    ['regVatCtrlAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                                (keydown)="
                                  openTab($event, 'regVatCtrlAccDebit')
                                "
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayRegVatCtrlAccDebit
                                [MasterSearchData]="VATCTRLACCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  lookupSelect(
                                    $event,
                                    ['regVatCtrlAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>
                        </div>

                        <div class="subHeading row mb-1">
                          <label
                            for="mode"
                            class="text-center col-sm-4 col-form-label"
                            id="ID029"
                            >Un-Registered
                          </label>

                          <label
                            for="mode"
                            class="text-center col-sm-4 col-form-label"
                            id="ID029"
                            >Credit</label
                          >

                          <label
                            for="mode"
                            class="text-center col-sm-4 col-form-label"
                            id="ID029"
                            >Debit</label
                          >
                        </div>

                        <div class="row mb-1">
                          <label
                            for="unregVatAccCredit"
                            class="col-sm-4 col-form-label"
                            id="ID029"
                            >VAT A/C</label
                          >
                          <div class="col-md-4">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                [readonly]="flag === 'VIEW'"
                                matInput
                                type="text"
                                formControlName="unregVatAccCredit"
                                (focusout)="
                                  SPvalidateLookupFieldModified(
                                    $event,
                                    VATACCodeData,
                                    ['unregVatAccCredit'],
                                    ['ACCODE']
                                  )
                                "
                                (keydown)="openTab($event, 'unregVatAccCredit')"
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayUnregVatAccCredit
                                [MasterSearchData]="VATACCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  lookupSelect(
                                    $event,
                                    ['unregVatAccCredit'],
                                    ['ACCODE']
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>

                          <div class="col-md-4">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                [readonly]="flag === 'VIEW'"
                                matInput
                                type="text"
                                formControlName="unregVatAccDebit"
                                (focusout)="
                                  SPvalidateLookupFieldModified(
                                    $event,
                                    VATACCodeData,
                                    ['unregVatAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                                (keydown)="openTab($event, 'unregVatAccDebit')"
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayUnregVatAccDebit
                                [MasterSearchData]="VATACCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  lookupSelect(
                                    $event,
                                    ['unregVatAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>
                        </div>

                        <div class="row mb-1">
                          <label
                            for="unregRcmAccCredit"
                            class="col-sm-4 col-form-label"
                            id="ID029"
                            >RCM A/C</label
                          >
                          <div class="col-md-4">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                [readonly]="flag === 'VIEW'"
                                matInput
                                type="text"
                                formControlName="unregRcmAccCredit"
                                (focusout)="
                                  SPvalidateLookupFieldModified(
                                    $event,
                                    RCMACCodeData,
                                    ['unregRcmAccCredit'],
                                    ['ACCODE']
                                  )
                                "
                                (keydown)="openTab($event, 'unregRcmAccCredit')"
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayUnregRcmAccCredit
                                [MasterSearchData]="RCMACCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  lookupSelect(
                                    $event,
                                    ['unregRcmAccCredit'],
                                    ['ACCODE']
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>

                          <div class="col-md-4">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                [readonly]="flag === 'VIEW'"
                                matInput
                                type="text"
                                formControlName="unregRcmAccDebit"
                                (focusout)="
                                  SPvalidateLookupFieldModified(
                                    $event,
                                    RCMACCodeData,
                                    ['unregRcmAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                                (keydown)="openTab($event, 'unregRcmAccDebit')"
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayUnregRcmAccDebit
                                [MasterSearchData]="RCMACCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  lookupSelect(
                                    $event,
                                    ['unregRcmAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>
                        </div>

                        <div class="row mb-1">
                          <label
                            for="unregVatCtrlAccCredit"
                            class="col-sm-4 col-form-label"
                            id="ID029"
                            >VAT Ctrl. A/C</label
                          >
                          <div class="col-md-4">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                [readonly]="flag === 'VIEW'"
                                matInput
                                type="text"
                                formControlName="unregVatCtrlAccCredit"
                                (focusout)="
                                  SPvalidateLookupFieldModified(
                                    $event,
                                    VATCTRLACCodeData,
                                    ['unregVatCtrlAccCredit'],
                                    ['ACCODE']
                                  )
                                "
                                (keydown)="
                                  openTab($event, 'unregVatCtrlAccCredit')
                                "
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayUnregVatCtrlAccCredit
                                [MasterSearchData]="VATCTRLACCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  lookupSelect(
                                    $event,
                                    ['unregVatCtrlAccCredit'],
                                    ['ACCODE']
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>

                          <div class="col-md-4">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                [readonly]="flag === 'VIEW'"
                                matInput
                                type="text"
                                formControlName="unregVatCtrlAccDebit"
                                (focusout)="
                                  SPvalidateLookupFieldModified(
                                    $event,
                                    VATCTRLACCodeData,
                                    ['unregVatCtrlAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                                (keydown)="
                                  openTab($event, 'unregVatCtrlAccDebit')
                                "
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayUnregVatCtrlAccDebit
                                [MasterSearchData]="VATCTRLACCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  lookupSelect(
                                    $event,
                                    ['unregVatCtrlAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>
                        </div>

                        <div class="subHeading row mb-1">
                          <label
                            for="mode"
                            class="text-center col-sm-4 col-form-label"
                            id="ID029"
                            >Import
                          </label>

                          <label
                            for="mode"
                            class="text-center col-sm-4 col-form-label"
                            id="ID029"
                            >Credit</label
                          >

                          <label
                            for="mod"
                            class="text-center col-sm-4 col-form-label"
                            id="ID029"
                            >Debit</label
                          >
                        </div>

                        <div class="row mb-1">
                          <label
                            for="mode"
                            class="col-sm-4 col-form-label"
                            id="ID029"
                            >VAT A/C</label
                          >
                          <div class="col-md-4">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                [readonly]="flag === 'VIEW'"
                                matInput
                                type="text"
                                formControlName="impVatAccDebit"
                                (focusout)="
                                  SPvalidateLookupFieldModified(
                                    $event,
                                    VATACCodeData,
                                    ['impVatAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                                (keydown)="openTab($event, 'impVatAccDebit')"
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayImpVatAccDebit
                                [MasterSearchData]="VATACCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  lookupSelect(
                                    $event,
                                    ['impVatAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>

                          <div class="col-md-4"></div>
                        </div>

                        <div class="row mb-1">
                          <label
                            for="mode"
                            class="col-sm-4 col-form-label"
                            id="ID029"
                            >RCM A/C</label
                          >
                          <div class="col-md-4">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                [readonly]="flag === 'VIEW'"
                                matInput
                                type="text"
                                formControlName="impRcmAccCredit"
                                (focusout)="
                                  SPvalidateLookupFieldModified(
                                    $event,
                                    RCMACCodeData,
                                    ['impRcmAccCredit'],
                                    ['ACCODE']
                                  )
                                "
                                (keydown)="openTab($event, 'impRcmAccCredit')"
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayImpRcmAccCredit
                                [MasterSearchData]="RCMACCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  lookupSelect(
                                    $event,
                                    ['impRcmAccCredit'],
                                    ['ACCODE']
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>

                          <div class="col-md-4"></div>
                        </div>

                        <div class="row mb-1">
                          <label
                            for="impVatCtrlAccDebit"
                            class="col-sm-4 col-form-label"
                            id="ID029"
                            >VAT Ctrl. A/C</label
                          >
                          <div class="col-md-4"></div>

                          <div class="col-md-4">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                [readonly]="flag === 'VIEW'"
                                matInput
                                type="text"
                                formControlName="impVatCtrlAccDebit"
                                (focusout)="
                                  SPvalidateLookupFieldModified(
                                    $event,
                                    VATCTRLACCodeData,
                                    ['impVatCtrlAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                                (keydown)="
                                  openTab($event, 'impVatCtrlAccDebit')
                                "
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayImpVatCtrlAccDebit
                                [MasterSearchData]="VATCTRLACCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  lookupSelect(
                                    $event,
                                    ['impVatCtrlAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>
                        </div>

                        <div class="row mb-1">
                          <label
                            for="mode"
                            class="col-sm-4 col-form-label"
                            id="ID029"
                            >RCM Ctrl. A/C</label
                          >
                          <div class="col-md-4"></div>

                          <div class="col-md-4">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                [readonly]="flag === 'VIEW'"
                                matInput
                                type="text"
                                formControlName="impRcmCtrlAccDebit"
                                (focusout)="
                                  SPvalidateLookupFieldModified(
                                    $event,
                                    RCMCTRLACCodeData,
                                    ['impRcmCtrlAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                                (keydown)="
                                  openTab($event, 'impRcmCtrlAccDebit')
                                "
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayImpRcmCtrlAccDebit
                                [MasterSearchData]="RCMCTRLACCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  lookupSelect(
                                    $event,
                                    ['impRcmCtrlAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>
                        </div>

                        <div class="subHeading row mb-1">
                          <label
                            for="mode"
                            class="text-center col-sm-4 col-form-label"
                            id="ID029"
                            >Export
                          </label>

                          <label
                            for="mode"
                            class="text-center col-sm-4 col-form-label"
                            id="ID029"
                            >Debit</label
                          >

                          <label
                            for="mode"
                            class="text-center col-sm-4 col-form-label"
                            id="ID029"
                            >Credit</label
                          >
                        </div>

                        <div class="row mb-1">
                          <label
                            for="expVatAccDebit"
                            class="col-sm-4 col-form-label"
                            id="ID029"
                            >VAT A/C</label
                          >
                          <div class="col-md-4"></div>

                          <div class="col-md-4">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                [readonly]="flag === 'VIEW'"
                                matInput
                                type="text"
                                formControlName="expVatAccDebit"
                                (focusout)="
                                  SPvalidateLookupFieldModified(
                                    $event,
                                    VATACCodeData,
                                    ['expVatAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                                (keydown)="openTab($event, 'expVatAccDebit')"
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayExpVatAccDebit
                                [MasterSearchData]="VATACCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  lookupSelect(
                                    $event,
                                    ['expVatAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>
                        </div>

                        <div class="row mb-1">
                          <label
                            for="expVatAccCredit"
                            class="col-sm-4 col-form-label"
                            id="ID029"
                            >VAT A/C</label
                          >
                          <div class="col-md-4">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                [readonly]="flag === 'VIEW'"
                                matInput
                                type="text"
                                formControlName="expVatAccCredit"
                                (focusout)="
                                  SPvalidateLookupFieldModified(
                                    $event,
                                    VATACCodeData,
                                    ['expVatAccCredit'],
                                    ['ACCODE']
                                  )
                                "
                                (keydown)="openTab($event, 'expVatAccCredit')"
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayExpVatAccCredit
                                [MasterSearchData]="VATACCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  lookupSelect(
                                    $event,
                                    ['expVatAccCredit'],
                                    ['ACCODE']
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>

                          <div class="col-md-4"></div>
                        </div>

                        <div class="subHeading row mb-1">
                          <label
                            for="mode"
                            class="text-center col-sm-4 col-form-label"
                            id="ID029"
                            >POS
                          </label>

                          <label
                            for="mode"
                            class="text-center col-sm-4 col-form-label"
                            id="ID029"
                            >Debit</label
                          >

                          <label
                            for="mode"
                            class="text-center col-sm-4 col-form-label"
                            id="ID029"
                            >Credit</label
                          >
                        </div>

                        <div class="row mb-1">
                          <label
                            for="posVatAccDebit"
                            class="col-sm-4 col-form-label"
                            id="ID029"
                            >POS VAT A/C</label
                          >
                          <div class="col-md-4"></div>

                          <div class="col-md-4">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                [readonly]="flag === 'VIEW'"
                                matInput
                                type="text"
                                formControlName="posVatAccDebit"
                                (focusout)="
                                  SPvalidateLookupFieldModified(
                                    $event,
                                    POSVATACCodeData,
                                    ['posVatAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                                (keydown)="openTab($event, 'posVatAccDebit')"
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayPosVatAccDebit
                                [MasterSearchData]="POSVATACCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  lookupSelect(
                                    $event,
                                    ['posVatAccDebit'],
                                    ['ACCODE']
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>
                        </div>

                        <div class="row mb-1">
                          <label
                            for="posVatRefundCredit"
                            class="col-sm-4 col-form-label"
                            id="ID029"
                            >POS VAT Refund</label
                          >
                          <div class="col-md-4">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                [readonly]="flag === 'VIEW'"
                                matInput
                                type="text"
                                formControlName="posVatRefundCredit"
                                (focusout)="
                                  SPvalidateLookupFieldModified(
                                    $event,
                                    POSVATREFUNDCodeData,
                                    ['posVatRefundCredit'],
                                    ['ACCODE']
                                  )
                                "
                                (keydown)="
                                  openTab($event, 'posVatRefundCredit')
                                "
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayPosVatRefundCredit
                                [MasterSearchData]="POSVATREFUNDCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  lookupSelect(
                                    $event,
                                    ['posVatRefundCredit'],
                                    ['ACCODE']
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>

                          <div class="col-md-4"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-8">
                    <dx-data-grid
                      id="gridContainer"
                      [showBorders]="true"
                      [dataSource]="accountSettingDateWiseVatDetailsData"
                      [showColumnLines]="true"
                      [showRowLines]="true"
                      class="mt-3"
                      [paging]="{ pageSize: 20 }"

                    >
                      <dxo-paging [enabled]="true"></dxo-paging>
                      <dxo-pager [showInfo]="true"></dxo-pager>
                      <dxo-selection mode="single"></dxo-selection>

                      <dxi-column
                        *ngFor="
                          let data of accountSettingDateWiseVatDetailsColumnHeadings
                        "
                        [dataField]="data.field"
                        [caption]="data.caption"
                        [allowEditing]="true"
                        [allowSorting]="true"
                        alignment="center"
                        backgroundcolor="#000"
                        [format]="
                          data.field === 'VAT_PER'
                            ? { type: 'fixedPoint', precision: 3 }
                            : null
                        "
                        [calculateCellValue]="
                          calculateCellValue(data, 'VAT_PER')
                        "
                      >
                      </dxi-column>
                    </dx-data-grid>
                  </div>
                </div>
              </mat-tab>
              <mat-tab label="Expense HSN/SAC Allocation">
                <div class="row mb-1">
                  <div class="col-md-12 mt-2">
                    <div class="row mb-1">
                      <div class="col-md-4 pt-4">
                        <menu-buttons
                          *ngIf="flag !== 'VIEW'"
                          [viewAddBtn]="true"
                          [viewDeleteBtn]="true"
                          [viewImportBtn]="false"
                          (addClick)="addRowFunc(1)"
                          (deleteClick)="deleteRowFunc(1)"
                        >
                        </menu-buttons>
                      </div>
                      <div class="col-md-8">
                        <mat-form-field
                          style="width: 50%"
                          class="pt-4"
                          appearance="outline"
                        >
                          <input
                            [readonly]="flag === 'VIEW'"
                            matInput
                            type="text"
                            formControlName="searchValue"
                            (input)="getSerachValue($event)"
                            placeholder="Search Expense HSN/SAC Allocation"
                          />
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="row pt-2">
                      <div class="col-md-12">
                        <dx-data-grid
                          #dataGrid1
                          id="gridContainer"
                          [dataSource]="
                            searching
                              ? expenseHsnSearchData
                              : expenseHsnSacAllocationData
                          "
                          [showBorders]="true"
                          [allowColumnReordering]="true"
                          [allowColumnResizing]="true"
                          class="mt-3"
                          [columnAutoWidth]="true"
                          [showColumnLines]="true"
                          [showRowLines]="true"
                          keyExpr="SN"
                          (onSelectionChanged)="onSelectionChanged($event, 1)"
                        >
                          <dxo-selection mode="single"></dxo-selection>
                          <dxo-scrolling mode="virtual"></dxo-scrolling>

                          <!-- Columns -->
                          <dxi-column
                            alignment="center"
                            dataField="SN"
                            caption="SN"
                          ></dxi-column>
                          <dxi-column
                            alignment="center"
                            dataField="EXPENSE_ACCODE"
                            caption="EXPENSE_ACCODE"
                            cellTemplate="expenseAccodeTemp"
                          ></dxi-column>
                          <dxi-column
                            alignment="center"
                            dataField="EXPENSE_ACCODE_DESC"
                            caption="EXPENSE_ACCODE_DESC"
                            cellTemplate="expenseAccodeDescTemp"
                          ></dxi-column>
                          <dxi-column
                            alignment="center"
                            dataField="HSN_SAC_CODE"
                            caption="HSN_SAC_CODE"
                            cellTemplate="hsnSacCodeTemp"
                          ></dxi-column>
                          <dxi-column
                            alignment="center"
                            dataField="HSN_SAC_DESC"
                            caption="HSN_SAC_DESC"
                            cellTemplate="hsnSacDescTemp"
                          ></dxi-column>
                          <dxi-column
                            alignment="center"
                            dataField="TAX_REG"
                            caption="TAX_REG"
                            cellTemplate="taxRegTemp"
                          ></dxi-column>
                          <dxi-column
                            alignment="center"
                            dataField="REVERSECHARGE_UNREG"
                            caption="REVERSECHARGE_UNREG"
                            cellTemplate="reverseChargeUnregTemp"
                          ></dxi-column>
                          <dxi-column
                            alignment="center"
                            dataField="ELIGIBLE_INPUTCREDIT"
                            caption="ELIGIBLE_INPUTCREDIT"
                            cellTemplate="eligibleInputCrediTTemp"
                          ></dxi-column>

                          <!-- ExpAcc Column -->
                          <div *dxTemplate="let data of 'expenseAccodeTemp'">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                matInput
                                [readonly]="flag === 'VIEW'"
                                type="text"
                                maxlength="6"
                                [value]="data.value"
                                style="width: 100%"
                                (focusout)="
                                  SPvalidateLookupGridModified(
                                    $event,
                                    hsnCodeData,
                                    ['EXPENSE_ACCODE', 'EXPENSE_ACCODE_DESC'],
                                    ['CODE', 'DESCRIPTION'],
                                    'expense',
                                    data.data
                                  )
                                "
                                (keydown)="
                                  openTabFromGrid(
                                    $event,
                                    ['EXPENSE_ACCODE', 'EXPENSE_ACCODE_DESC'],
                                    data.data,
                                    'expense',
                                    'EEXPENSE_ACCODE'
                                  )
                                "
                              />
                              <master-search
                                *ngIf="flag != 'VIEW'"
                                [MasterSearchData]="hsnCodeData"
                                #overlayEEXPENSEACCODE
                                class="masterSearch"
                                (newRowClick)="
                                  gridDataBinding(
                                    $event,
                                    data.data,
                                    ['EXPENSE_ACCODE', 'EXPENSE_ACCODE_DESC'],
                                    'expense'
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>
                          <!-- Exp Account Description Column -->
                          <div
                            *dxTemplate="let data of 'expenseAccodeDescTemp'"
                          >
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                matInput
                                [readonly]="flag === 'VIEW'"
                                type="text"
                                [readonly]="true"
                                [value]="data.value"
                                style="width: 100%"
                              />
                            </mat-form-field>
                          </div>

                          <!-- HSN Code Column -->
                          <div *dxTemplate="let data of 'hsnSacCodeTemp'">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                matInput
                                [readonly]="flag === 'VIEW'"
                                type="text"
                                [value]="data.value"
                                style="width: 100%"
                                (focusout)="
                                  SPvalidateLookupGridModified(
                                    $event,
                                    hsnCodeData,
                                    ['HSN_SAC_CODE', 'HSN_SAC_DESC'],
                                    ['CODE', 'DESCRIPTION'],
                                    'expense',
                                    data.data
                                  )
                                "
                                (keydown)="
                                  openTabFromGrid(
                                    $event,
                                    ['HSN_SAC_CODE', 'HSN_SAC_DESC'],
                                    data.data,
                                    'expense',
                                    'EHSN_SAC_CODE'
                                  )
                                "
                              />
                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayEHSNSACCODE
                                [MasterSearchData]="hsnCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  gridDataBinding(
                                    $event,
                                    data.data,
                                    ['HSN_SAC_CODE', 'HSN_SAC_DESC'],
                                    'expense'
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>

                          <!-- HSN Description Column -->
                          <div *dxTemplate="let data of 'hsnSacDescTemp'">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                matInput
                                [readonly]="true"
                                type="text"
                                [value]="data.value"
                                style="width: 100%"
                              />
                            </mat-form-field>
                          </div>

                          <!-- Tax Reg Column -->
                          <div *dxTemplate="let data of 'taxRegTemp'">
                            <dx-check-box
                              [value]="data.value"
                              [disabled]="flag === 'VIEW'"
                              (valueChange)="
                                updateField(
                                  $event,
                                  data.data,
                                  'TAX_REG',
                                  'expense'
                                )
                              "
                            >
                            </dx-check-box>
                          </div>

                          <!-- Rev Un Column -->
                          <div
                            *dxTemplate="let data of 'reverseChargeUnregTemp'"
                          >
                            <dx-check-box
                              [value]="data.value"
                              [disabled]="flag === 'VIEW'"
                              (valueChange)="
                                updateField(
                                  $event,
                                  data.data,
                                  'REVERSECHARGE_UNREG',
                                  'expense'
                                )
                              "
                            >
                            </dx-check-box>
                          </div>

                          <!-- I/p Cre Column -->
                          <div
                            *dxTemplate="let data of 'eligibleInputCrediTTemp'"
                          >
                            <dx-check-box
                              [value]="data.value"
                              [disabled]="flag === 'VIEW'"
                              (valueChange)="
                                updateField(
                                  $event,
                                  data.data,
                                  'ELIGIBLE_INPUTCREDIT',
                                  'expense'
                                )
                              "
                            >
                            </dx-check-box>
                          </div>
                        </dx-data-grid>
                      </div>
                    </div>
                  </div>
                </div>
              </mat-tab>
              <mat-tab label="Cost Center Account">
                <div class="row mb-1">
                  <div class="col-md-12">
                    <div class="row mb-1 mt-2">
                      <div *ngIf="flag !== 'VIEW'" class="pt-4 col-md-2">
                        <button
                          type="button"
                          class="btn btn-primary text-center"
                          (click)="getGPCAccountData()"
                        >
                          Fill GPC Account
                        </button>
                      </div>

                      <div class="col-md-3 pt-4">
                        <menu-buttons
                          *ngIf="flag !== 'VIEW'"
                          [viewAddBtn]="true"
                          [viewDeleteBtn]="true"
                          [viewImportBtn]="false"
                          (addClick)="addRowFunc(0)"
                          (deleteClick)="deleteRowFunc(0)"
                        >
                        </menu-buttons>
                      </div>
                    </div>
                    <div class="row pt-2">
                      <div class="col-md-12">
                        <dx-data-grid
                          #dataGrid2
                          id="gridContainer"
                          [dataSource]="costCenterAccountData"
                          [showBorders]="true"
                          [allowColumnReordering]="true"
                          [allowColumnResizing]="true"
                          class="mt-3"
                          [columnAutoWidth]="true"
                          [showColumnLines]="true"
                          [showRowLines]="true"
                          keyExpr="SN"
                          (onSelectionChanged)="onSelectionChanged($event, 0)"
                          [paging]="{ pageSize: 10 }"
                        
                          >
                          <dxo-selection mode="single"></dxo-selection>
                          <dxo-scrolling mode="standard"></dxo-scrolling>
                          <dxo-pager
                            *ngIf="costCenterAccountData.length"
                            [showInfo]="true"
                            [visible]="true"
                            (change)="event($event)"
                            [showPageSizeSelector]="true"
                            [allowedPageSizes]="
                              costCenterAccountData &&
                              costCenterAccountData.length > 100
                                ? [10, 20, 50]
                                : []
                            "
                          ></dxo-pager>

                          <!-- Columns -->
                          <dxi-column
                            alignment="center"
                            dataField="SN"
                            caption="SN"
                          ></dxi-column>
                          <dxi-column
                            alignment="center"
                            dataField="COST_CODE"
                            caption="COST_CODE"
                            cellTemplate="costCenterTemp"
                          ></dxi-column>
                          <dxi-column
                            alignment="center"
                            dataField="GPC_ACCODE"
                            caption="GPC_ACCODE"
                            cellTemplate="gpcAccodeTemp"
                          ></dxi-column>
                          <dxi-column
                            alignment="center"
                            dataField="GPC_ACCODE_DESC"
                            caption="GPC_ACCODE_DESC"
                            cellTemplate="gpcAccodeDescTemp"
                          ></dxi-column>
                          <dxi-column
                            alignment="center"
                            dataField="HSN_SAC_CODE"
                            caption="HSN_SAC_CODE"
                            cellTemplate="hsnSacTemp"
                          ></dxi-column>
                          <dxi-column
                            alignment="center"
                            dataField="HSN_SAC_DESC"
                            caption="HSN_SAC_DESC"
                            cellTemplate="hsnSacDescTemp"
                          ></dxi-column>
                          <dxi-column
                            alignment="center"
                            dataField="TAX_REG"
                            caption="TAX_REG"
                            cellTemplate="taxRegTemp"
                          ></dxi-column>
                          <dxi-column
                            alignment="center"
                            dataField="REVERSECHARGE_UNREG"
                            caption="REVERSECHARGE_UNREG"
                            cellTemplate="reverseChargeUnregTemp"
                          ></dxi-column>
                          <dxi-column
                            alignment="center"
                            dataField="ELIGIBLE_INPUTCREDIT"
                            caption="ELIGIBLE_INPUTCREDIT"
                            cellTemplate="eligibleInputCreditTemp"
                          ></dxi-column>

                          <!-- ExpAcc Column -->
                          <div *dxTemplate="let data of 'costCenterTemp'">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                maxlength="6"
                                matInput
                                [readonly]="true"
                                type="text"
                                (change)="
                                  updateField(
                                    $event,
                                    data.data,
                                    'COST_CODE',
                                    'costCenter'
                                  )
                                "
                                [value]="data.value"
                                style="width: 100%"
                              />
                            </mat-form-field>
                          </div>

                          <!-- Exp Account Description Column -->
                          <div *dxTemplate="let data of 'gpcAccodeTemp'">
                            <mat-form-field
                              style="
                                width: 100%;
                                display: flex;
                                align-items: center;
                              "
                              appearance="outline"
                            >
                              <input
                                matInput
                                [readonly]="flag === 'VIEW'"
                                type="text"
                                maxlength="6"
                                [value]="data.value"
                                style="flex: 1"
                                (keydown)="openGPCGrid($event, data)"
                              />

                              <i
                                class="pi pi-search"
                                style="
                                  font-size: 12px;
                                  font-weight: bold;
                                  cursor: pointer;
                                "
                                (click)="openGPCGrid($event, data)"
                              ></i>
                            </mat-form-field>
                          </div>
                          <div *dxTemplate="let data of 'gpcAccodeDescTemp'">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                matInput
                                [readonly]="flag === 'VIEW'"
                                type="text"
                                (change)="
                                  updateField(
                                    $event,
                                    data.data,
                                    'GPC_ACCODE_DESC',
                                    'costCenter'
                                  )
                                "
                                [value]="data.value"
                                style="width: 100%"
                              />
                            </mat-form-field>
                          </div>

                          <!-- HSN Description Column -->
                          <div *dxTemplate="let data of 'hsnSacTemp'">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                matInput
                                [readonly]="flag === 'VIEW'"
                                type="text"
                                maxlength="6"
                                [value]="data.value"
                                style="width: 100%"
                                (focusout)="
                                  SPvalidateLookupGridModified(
                                    $event,
                                    hsnCodeData,
                                    ['HSN_SAC_CODE', 'HSN_SAC_DESC'],
                                    ['CODE', 'DESCRIPTION'],
                                    'costCenter',
                                    data.data
                                  )
                                "
                                (keydown)="
                                  openTabFromGrid(
                                    $event,
                                    ['HSN_SAC_CODE', 'HSN_SAC_DESC'],
                                    data.data,
                                    'costCenter',
                                    'CHSN_SAC_CODE'
                                  )
                                "
                              />

                              <master-search
                                *ngIf="flag != 'VIEW'"
                                #overlayCHSNSACCODE
                                [MasterSearchData]="hsnCodeData"
                                class="masterSearch"
                                (newRowClick)="
                                  gridDataBinding(
                                    $event,
                                    data.data,
                                    ['HSN_SAC_CODE', 'HSN_SAC_DESC'],
                                    'costCenter',
                                    true
                                  )
                                "
                              ></master-search>
                            </mat-form-field>
                          </div>

                          <div *dxTemplate="let data of 'hsnSacDescTemp'">
                            <mat-form-field
                              style="width: 100%"
                              appearance="outline"
                            >
                              <input
                                matInput
                                [readonly]="true"
                                type="text"
                                [value]="data.value"
                                style="width: 100%"
                              />
                            </mat-form-field>
                          </div>

                          <!-- Tax Reg Column -->
                          <div *dxTemplate="let data of 'taxRegTemp'">
                            <dx-check-box
                              [value]="data.value"
                              [disabled]="flag === 'VIEW'"
                              (valueChange)="
                                updateField(
                                  $event,
                                  data.data,
                                  'TAX_REG',
                                  'costCenter'
                                )
                              "
                            >
                            </dx-check-box>
                          </div>

                          <!-- Rev Un Column -->
                          <div
                            *dxTemplate="let data of 'reverseChargeUnregTemp'"
                          >
                            <dx-check-box
                              [value]="data.value"
                              [disabled]="flag === 'VIEW'"
                              (valueChange)="
                                updateField(
                                  $event,
                                  data.data,
                                  'REVERSECHARGE_UNREG',
                                  'costCenter'
                                )
                              "
                            >
                            </dx-check-box>
                          </div>

                          <!-- I/p Cre Column -->
                          <div
                            *dxTemplate="let data of 'eligibleInputCreditTemp'"
                          >
                            <dx-check-box
                              [value]="data.value"
                              [disabled]="flag === 'VIEW'"
                              (valueChange)="
                                updateField(
                                  $event,
                                  data.data,
                                  'ELIGIBLE_INPUTCREDIT',
                                  'costCenter'
                                )
                              "
                            >
                            </dx-check-box>
                          </div>
                        </dx-data-grid>
                      </div>
                    </div>
                  </div>
                </div>
              </mat-tab>
            </mat-tab-group>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
