<div>
    <div class="card-content border-bottom d-flex justify-content-between p-2">
        <h5 class="pos-modaltitle" id="modal-dia-metal">TDS Master</h5>
        <button type="button" class="btn btn-close close-btn" (click)="close()">
            <i class="feather icon-x close-icon"></i>
        </button>
    </div>

    <modal-header (cancelClick)="close()" (saveClick)="formSubmit()" (deleteClick)="DeleteController()"
        [isViewDelete]="editMode" [isViewSave]="!viewMode" [isViewCancel]="!viewMode"
        [isViewMore]="!viewMode"></modal-header>



    <div class="container-fluid pt-3">
        <form [formGroup]="tdsform" class="p-1">
            <div class="row p-4">
                <div class="col-md-12">
                    <div class="row align-items-center">

                        <div class="col-md-6">
                            <div class="row mb-2">
                                <div class="col-md-6">
                                    <div class="row">
                                        <label for="inputPassword" id="ID001" class="col-sm-4 col-form-label">
                                            Section Code :</label>
                                        <div class="col-sm-8">
                                            <mat-form-field style="width: 100%" appearance="outline">
                                                <input type="text" #codeInput matInput formControlName="section_code" id="section_code" #section_code
                                                    UpperCaseDirective autocomplete="off" maxlength="6"  (change)="getgridvalues()" (focusout)="checksection()" />
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="row">
                                        <label for="financial_year" id="ID001" class="col-sm-4 col-form-label">
                                            Financial Year :
                                        </label>
                                        <div class="col-sm-8">
                                            <mat-form-field style="width: 100%" appearance="outline">
                                                <mat-select formControlName="financial_year">
                                                    <mat-option *ngFor="let year of finyears" [value]="year">
                                                        {{ year }}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="row mb-2">
                                <div class="col-md-2">
                                    <label for="inputPassword" id="ID001" class="col-sm-12 col-form-label">
                                        Description (NP) :</label>
                                </div>
                                <div class="col-md-10">
                                    <mat-form-field style="width: 100%" appearance="outline">
                                        <input type="text" #codeInput matInput formControlName="description"
                                            autocomplete="off" />
                                    </mat-form-field>
                                </div>
                            </div>

                            <div class="row mb-2">
                                <div class="col-md-6">
                                    <div class="row">
                                        <label for="inputPassword" id="ID001" class="col-sm-4 col-form-label">
                                            Credit A/c :</label>
                                        <div class="col-sm-8">
                                            <mat-form-field style="width: 100%" appearance="outline">
                                                <input type="text" #codeInput matInput formControlName="credit_ac"
                                                    UpperCaseDirective autocomplete="off" (focusout)="SPvalidateLookupFieldModified(
                                                $event,
                                                creditacdata,
                                                ['credit_ac'],
                                                false,
                                                ['ACCODE'],
                                                false
                                            )" />
                                                <master-search *ngIf="this.flag != 'VIEW'" class="masterSearch" [MasterSearchData]="creditacdata"
                                                    (newRowClick)="creditcodeselected($event)">
                                                </master-search>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="row">
                                        <label for="datefrom" id="ID001" class="col-sm-4 col-form-label">
                                            Debit A/c :
                                        </label>
                                        <!-- <mat-form-field style="width: 100%" appearance="outline">
                                            <input type="date" matInput id="datefrom" formControlName="dateto"
                                                autocomplete="off" />
                                        </mat-form-field> -->
                                        <div class="col-sm-8">
                                            <mat-form-field style="width: 100%" appearance="outline">
                                                <input type="text" #codeInput matInput formControlName="debit_ac"
                                                    UpperCaseDirective autocomplete="off" (focusout)="SPvalidateLookupFieldModified(
                                                    $event,
                                                    debitacdata,
                                                    ['debit_ac'],
                                                    false,
                                                    ['ACCODE'],
                                                    false
                                                )" />
                                                <master-search *ngIf="this.flag != 'VIEW'" class="masterSearch" [MasterSearchData]="debitacdata"
                                                    (newRowClick)="debitcodeselected($event)">
                                                </master-search>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row text-center">
                                <div class="col-sm-8">
                                    <mat-checkbox formControlName="call" id="call" [disabled]="viewMode"> Cal On Taxable Amt</mat-checkbox>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-5">
                            <div class="row text-center">
                                <div class="col-sm-8">
                                    <mat-checkbox formControlName="allbranch" id="call"> Apply to All
                                        Branch</mat-checkbox>
                                </div>
                            </div>
                            <div class="row ms-2">
                                <label for="inputPassword" class="col-sm-3 col-form-label">Effective Date :</label>
                                <div class="col-md-6">
                                    <mat-form-field style="width: 100%;" appearance="outline">
                                        <input matInput [matDatepicker]="effdate" [max]="effdate"
                                            formControlName="effdate" placeholder="DD/MM/YYYY" DateValidation />
                                        <mat-datepicker-toggle matSuffix [for]="effdate"></mat-datepicker-toggle>
                                        <mat-datepicker #effdate></mat-datepicker>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>

                    </div>


                </div>



                <div class="row">
                    <div class="col-md-8">
                        <dx-data-grid id="gridContainer" [dataSource]="maindetails" [showBorders]="true"
                            [showColumnLines]="true" [showRowLines]="true" [allowColumnResizing]="true" keyExpr="SRNO"
                            style="height: 250px;" [paging]="{ enabled: true }">

                            <dxi-column dataField="SRNO" caption="S.NO #">
                            </dxi-column>

                            <dxi-column dataField="TDS_CODE" caption="TDS Code" format="dd/MM/yyyy">
                            </dxi-column>


                            <dxi-column dataField="EFFECT_FROM_DATE" caption="Effect Date" cellTemplate="effdate">
                            </dxi-column>

                            <div *dxTemplate="let data of 'effdate'">
                                <input type="date" [disabled]="viewMode"   [value]="data.value" style="width: 100%;" />
                            </div>


                            <dxi-column dataField="INDIVIDUAL_PER" caption="Individual %" cellTemplate="individual_per">
                            </dxi-column>

                            <div *dxTemplate="let data of 'individual_per'">
                                <input type="number" [disabled]="viewMode" class="text-right"  [value]="data.value" style="width: 100%;" (change)="individual_change($event,data)"/>
                            </div>


                            <dxi-column dataField="COMPANY_PER" caption="Company %" cellTemplate="company_per">
                            </dxi-column>

                            <div *dxTemplate="let data of 'company_per'">
                                <input type="number" [disabled]="viewMode"  class="text-right" [value]="data.value" style="width: 100%;" (change)="company_change($event,data)" />
                            </div>

                            <dxi-column dataField="NOPAN_PER" caption="No Pan %" cellTemplate="nopan_per">
                            </dxi-column>

                            <div *dxTemplate="let data of 'nopan_per'">
                                <input type="number" [disabled]="viewMode" class="text-right"  [value]="data.value" style="width: 100%;" (change)="nopan_change($event,data)" />
                            </div>

                            <dxi-column dataField="TDS_LIMIT" caption="TDS Limit" class="text-right" cellTemplate="tdslimit_per">
                            </dxi-column>

                            <div *dxTemplate="let data of 'tdslimit_per'">
                                <input type="number" [disabled]="viewMode" class="text-right"   [value]="data.value" style="width: 100%;"  (change)="tdslimit_chnage($event,data)"/>
                            </div>


                        </dx-data-grid>
                    </div>

                </div>



            </div>
        </form>

    </div>
</div>