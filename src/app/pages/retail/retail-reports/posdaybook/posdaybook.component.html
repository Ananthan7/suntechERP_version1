<!-- header section starts -->
<div class="card-content border-bottom d-flex justify-content-between p-2">
    <h5 class="pos-modaltitle" id="modal-dia-metal"> POS Daybook </h5>
    <button type="button" class="btn btn-close close-btn" (click)="close()">
        <i class="feather icon-x close-icon"></i>
    </button>
</div>
<!-- modal header component -->
<modal-header [isViewDelete]="false" [isViewMore]="false" [isViewSave]="false" [editSaveBtnText]="'Go'" 
 [isloading]="isLoading" [isViewCancel]="false"></modal-header>
<!-- content section -->
<div class="container-fluid pt-3 mb-5">
    <form [formGroup]="posDayBookForm">
        <div class="row">
            <div class="col-md-1 d-flex align-items-center">
                <label for="inputPassword" class="col-form-label" id="ID001">Branch</label>
            </div>
            <div class="col-md-2 d-flex align-items-center">
                <mat-form-field appearance="outline" style="width: -webkit-fill-available;">
                    <input matInput="text" name="branch" autocomplete="off" formControlName="branch"/>
                    <app-branch-division [fetchData]="fetchedBranchData"
                    (newRowClick)="selectedData($event)" [branchView]="true" [divisionView]="false"
                    [additionalFilterAreaView]="false" [additionalFilterBCategView]="false"
                    class="branchDivisionelectr"
                    [matTooltip]="branchDivisionControlsTooltip"
                    matTooltipClass="custom-tooltip"
                    matTooltipPosition="above"
                    ></app-branch-division>
                </mat-form-field>
            </div>

            
            <div class="col-md-7 d-flex align-items-center">
                <app-date (selectedDate)="setDateValue($event)" [dateValue]="dateToPass"></app-date>
            </div> 
        </div>

        <div class="col-md-12 mt-3">
            <mat-tab-group>
                <mat-tab label="POS Register">
                    <dx-data-grid></dx-data-grid>
                </mat-tab>
                
                <mat-tab label="POS Collection & Old Gold Purchase">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="grid-label text-center mt-1" id="ID002">Total Purchase Value</div>
                            <dx-data-grid>
                                <dxi-column alignment="center" caption="Mode"></dxi-column>
                                <dxi-column alignment="center" caption="Received In"></dxi-column>
                                <dxi-column alignment="center" caption="Description"></dxi-column>
                                <dxi-column alignment="center" caption="Amount"></dxi-column>
    
                                <dxo-summary>
                                    <dxi-total-item column="amount" summaryType="sum" displayFormat="Total: {0}"></dxi-total-item>
                                </dxo-summary>
                            </dx-data-grid>
                        </div>
    
                        <div class="col-md-4">
                            <div class="grid-label text-center mt-1" id="ID003">Old Gold Purchase Summary</div>
                            <dx-data-grid>
                                <dxi-column alignment="center" caption="Stock Code"></dxi-column>
                                <dxi-column alignment="center" caption="Quantity"></dxi-column>
                                <dxi-column alignment="center" caption="Amount"></dxi-column>

                                <dxo-summary>
                                    <dxi-total-item column="Quantity" summaryType="sum" displayFormat="Total: {0}"></dxi-total-item>
                                    <dxi-total-item column="amount" summaryType="sum" displayFormat="Total: {0}"></dxi-total-item>
                                </dxo-summary>
                            </dx-data-grid>
                        </div>
    
                        <div class="col-md-4">
                            <div class="grid-label text-center mt-1" id="ID004">POS Account Balance</div>
                            <dx-data-grid>
                                <dxi-column alignment="center" caption="Account"></dxi-column>
                                <dxi-column alignment="center" caption="Description"></dxi-column>
                                <dxi-column alignment="center" caption="Currency"></dxi-column>
                                <dxi-column alignment="center" caption="Amount"></dxi-column>
                            </dx-data-grid>
                        </div>
                    </div>
                </mat-tab>

                <mat-tab label="Movements">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="grid-label text-center mt-1" id="ID005">POS Account Movement</div>
                            <dx-data-grid>
                                <dxi-column alignment="center" caption="Account"></dxi-column>
                                <dxi-column alignment="center" caption="Account Name"></dxi-column>
                                <dxi-column alignment="center" caption="Voc Description"></dxi-column>
                                <dxi-column alignment="center" caption="Voucher"></dxi-column>
                                <dxi-column alignment="center" caption="Amount"></dxi-column>

                                <dxo-summary>
                                    <dxi-total-item column="amount" summaryType="sum" displayFormat="Total: {0}"></dxi-total-item>
                                </dxo-summary>
                            </dx-data-grid>  
                        </div>

                        <div class="col-md-6">
                            <div class="grid-label text-center mt-1" id="ID006">POS Sales Order Summary</div>
                            <dx-data-grid>
                                <dxi-column alignment="center" caption="Branch"></dxi-column>
                                <dxi-column alignment="center" caption="Status"></dxi-column>
                                <dxi-column alignment="center" caption="#Vocs"></dxi-column>
                                <dxi-column alignment="center" caption="Amount"></dxi-column>
                                <dxi-column alignment="center" caption="Gold & Oth"></dxi-column>
                                <dxi-column alignment="center" caption="Dia & Oth"></dxi-column>

                                <dxo-summary>
                                    <dxi-total-item column="amount" summaryType="sum" displayFormat="Total: {0}"></dxi-total-item>
                                </dxo-summary>
                            </dx-data-grid> 
                        </div>
                    </div>     
                </mat-tab>

                <mat-tab label="Others">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="grid-label text-center mt-1" id="ID007">Salesman Wise Summary</div>
                            <dx-data-grid>
                                <dxi-column alignment="center" caption="Salesman"></dxi-column>
                                <dxi-column alignment="center" caption="#Docs"></dxi-column>
                                <dxi-column alignment="center" caption="Tot Amount"></dxi-column>
                                <dxi-column alignment="center" caption="Gold"></dxi-column>
                                <dxi-column alignment="center" caption="Dia & Oth"></dxi-column>
                                <dxi-column alignment="center" caption="Mkg. Value"></dxi-column>

                                <dxo-summary>
                                    <dxi-total-item column="amount" summaryType="sum" displayFormat="Total: {0}"></dxi-total-item>
                                    <dxi-total-item column="Gold" summaryType="sum" displayFormat="Total: {0}"></dxi-total-item>
                                    <dxi-total-item column="Dia & Oth" summaryType="sum" displayFormat="Total: {0}"></dxi-total-item>
                                    <dxi-total-item column="Mkg. Value" summaryType="sum" displayFormat="Total: {0}"></dxi-total-item>
                                </dxo-summary>
                            </dx-data-grid>  
                        </div>

                        <div class="col-md-6">
                            <div class="grid-label text-center mt-1" id="ID008">Cash & Credit Card Receipt Summary</div>
                            <dx-data-grid>
                                <dxi-column alignment="center" caption="Mode"></dxi-column>
                                <dxi-column alignment="center" caption="Voc Type"></dxi-column>
                                <dxi-column alignment="center" caption="Receive As"></dxi-column>
                                <dxi-column alignment="center" caption="Currency"></dxi-column>
                                <dxi-column alignment="center" caption="Amount FC"></dxi-column>
                                <dxi-column alignment="center" caption="Amount CC"></dxi-column>

                                <dxo-summary>
                                    <dxi-total-item column="amount" summaryType="sum" displayFormat="Total: {0}"></dxi-total-item>
                                </dxo-summary>
                            </dx-data-grid>  
                        </div>
                    </div>
                </mat-tab>
            </mat-tab-group>
        </div>

        <div class="row">
            <app-report-screen-buttons (saveTemplateClick)="saveTemplate()" (previewClicked)="previewClick()"
            (printClicked)="printBtnClick()"></app-report-screen-buttons>
        </div>


        <dx-popup [width]="300" [height]="200" [showTitle]="true" container=".dx-viewport"
                title="Template Data" [dragEnabled]="false" [showCloseButton]="false" (onHidden)="popupClosed()"
                [visible]="popupVisible">
                <div class="popup-content">
                    <div class="form-group">
                        <label for="T_Name">Name:</label>
                        <input type="text" id="T_Name" class="form-control" formControlName="templateName"/>
                    </div>
                    <div class="button-group d-flex mt-2">
                        <button mat-flat-button [ngClass]="{SaveNew_template: templateNameHasValue,
                            'btn-m-r-10': true, 'demo-button': true, 'btn-width': true, 'mx-1': true}"
                        (click)="saveTemplate_DB()">
                        {{ templateNameHasValue ? "Save as New Template" : "Save" }}
                        </button>
                        <button  mat-flat-button class="btn-m-r-10 btn-width mx-1 cancelBTN"
                        (click)="popupClosed()">
                        Cancel</button>
                    </div>
                    <br />
                    <br />
                    <br />
                </div>
          </dx-popup>
    </form>
</div>