<!-- header section starts -->
<div class="card-content border-bottom d-flex justify-content-between p-2">
  <h5 class="pos-modaltitle" id="modal-dia-metal">Job Creation/Allocation </h5>
  <button type="button" class="btn btn-close close-btn" (click)="close()">
    <i class="feather icon-x close-icon"></i>
  </button>
</div>
<!-- modal header component -->
<modal-header (saveClick)="formSubmit()" (cancelClick)="close()" [isViewAttachment]="!viewMode" (attachmentClick)="attachmentClicked()"></modal-header>

<!-- component to upload attachment -->
<attachment-upload (uploadSubmit)="uploadSubmited($event)" [savedAttachment]="savedAttachments"></attachment-upload>

<div class="container-fluid">
  <div class="row">
    <div class="col-md-12">
      <form [formGroup]="jobCreationFrom">
        <div class="row">
          <div class="col-6">
            <h6>{{branchCode}} - {{userName}}</h6>
          </div>
          <div class="col-md-12">
            <div class="row">
              <div class="col-md-4">
                <div class=" row">
                  <label for="inputPassword" class="col-sm-5 col-form-label">Voc
                    Type:</label>
                  <div class="col-md-6">
                    <mat-form-field appearance="outline" style="width: 100%;">
                      <input type="text" matInput formControlName="vocType" />
                    </mat-form-field>
                  </div>
                </div>
                <div class=" row">
                  <label for="inputPassword" class="col-sm-5 col-form-label">Voc
                    Date:</label>
                  <div class="col-md-6">
                    <mat-form-field appearance="outline" style="width: 100%;">
                      <input matInput [matDatepicker]="vocDate" formControlName="vocDate" placeholder="DD/MM/YYYY"
                        DateValidation />
                      <mat-datepicker-toggle matSuffix [for]="vocDate"></mat-datepicker-toggle>
                      <mat-datepicker #vocDate></mat-datepicker>
                    </mat-form-field>
                  </div>
                </div>
                <div class=" row">
                  <label for="inputPassword" class="col-sm-5 col-form-label">Voc
                    No:</label>
                  <div class="col-md-6">
                    <mat-form-field appearance="outline" style="width: 100%;">
                      <input type="text" matInput formControlName="vocNo" class="text-right" NumberOnly />
                    </mat-form-field>
                  </div>
                </div>
                <div class=" row">
                  <label for="inputPassword" class="col-sm-5 col-form-label">User
                    Name:</label>
                  <div class="col-md-7">
                    <mat-form-field appearance="outline" style="width: 100%;">
                      <input type="text" matInput formControlName="userName"
                        (keydown)="lookupKeyPress($event,'userName')"
                        (focusout)="validateLookupField($event,user,'userName')" />
                      <master-search class="masterSearch" [MasterSearchData]="user"  #overlayuserName  
                        (newRowClick)="userDataSelected($event)">
                      </master-search>
                    </mat-form-field>

                  </div>
                </div>
              </div>
              <!-- <div class="col-md-4">
                <div class=" row ">
                  <label for="inputPassword" class="col-sm-5 col-form-label">Doc.Ref:</label>
                  <div class="col-md-6">
                    <mat-form-field appearance="outline" style="width: 100%;">
                      <input type="text" matInput formControlName="docRef" />
                    </mat-form-field>
                  </div>
                </div>
                <div class=" row">
                  <label for="inputPassword" class="col-sm-5 col-form-label">Process
                    Code:</label>
                  <div class="col-md-7">
                    <mat-form-field appearance="outline" style="width: 80%;">
                      <input type="text" matInput formControlName="processCode" />
                    </mat-form-field>
                    <master-search [MasterSearchData]="ProcessCodeData"
                      (newRowClick)="ProcessCodeSelected($event)"></master-search>
                  </div>
                </div>
                 <div class=" bd-highlight pt-1">
                  <button type="button" class="btn btn-primary metal-issue-add-btn">
                    Refresh Data
                  </button>
                </div> 
              </div> -->
            </div>

          </div>
          <div class="col-md-12 mt-3">
            <mat-tab-group style="background-color: #f5f2ee;" [selectedIndex]="this.divisionMS == 'ID' ? 1 : 0">
              <mat-tab label="Pending Sales Order">
                <dx-data-grid class="mt-3" #dataGrid id="gridContainer" [allowColumnResizing]="true" keyExpr="ID"
                  [showBorders]="true" [allowColumnReordering]="true" [allowColumnResizing]="true"
                  [columnAutoWidth]="true">
                  <dxo-paging [enabled]="false"></dxo-paging>
                  <dxo-editing mode="cell" [allowUpdating]="true">
                  </dxo-editing>
                  <dxo-selection mode="multiple"></dxo-selection>
                  <dxo-scrolling mode="virtual"></dxo-scrolling>

                  <dxi-column *ngFor="let data of columnhead" dataField="{{ data }}" caption="{{ data }}"
                    [allowEditing]="false" alignment="center" backgroundcolor="#000">
                  </dxi-column>
                  <dxi-column dataField="Extra Pcs" caption="Extra Pcs" [allowEditing]="true"> </dxi-column>
                  <dxi-column dataField="Pcs/Bag" caption="Pcs/Bag" [allowEditing]="true"> </dxi-column>


                </dx-data-grid>
              </mat-tab>
              <mat-tab label="Job">
                <dx-data-grid class="mt-3" #dataGrid id="gridContainer" [allowColumnResizing]="true" keyExpr="ID"
                  [showBorders]="true">
                  <dxo-paging [enabled]="false"></dxo-paging>
                  <dxo-editing mode="cell" [allowUpdating]="true">
                  </dxo-editing>
                  <dxo-selection mode="multiple"></dxo-selection>
                  <dxo-scrolling mode="virtual"></dxo-scrolling>

                  <dxi-column *ngFor="let data of columnheader" dataField="{{ data }}" caption="{{ data }}"
                    [allowEditing]="true" alignment="center" backgroundcolor="#000">
                  </dxi-column>
                </dx-data-grid>
              </mat-tab>
            </mat-tab-group>
            <div class="row mt-3">
              <div class="col-md-10">
                <div class="row align-items-center">
                  <label for="inputPassword" class="col-sm-2 col-form-label">Remarks:</label>
                  <div class="col-md-2">
                    <mat-form-field appearance="outline" style="width: 100%;">
                      <input type="text" matInput formControlName="narration" maxlength="40" />
                    </mat-form-field>
                  </div>
                  <div class="col-md-2 bd-highlight pt-1 ml-2">
                    <button type="button" class="btn btn-primary ">Job Allocation</button>
                  </div>
                  <div class="col-md-2 bd-highlight pt-1 ml-2">
                    <button type="button" class="btn btn-primary ">MRQ Print</button>
                  </div>
                </div>
              </div>
            </div>



          </div>
        </div>

      </form>
    </div>
  </div>
</div>