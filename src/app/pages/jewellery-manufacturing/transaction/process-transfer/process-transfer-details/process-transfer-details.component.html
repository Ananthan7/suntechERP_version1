<div class="card-content border-bottom d-flex justify-content-between p-2">
  <h5 class="pos-modaltitle" id="modal-dia-metal">Process Transfer (MFG)
    Details</h5>
  <button type="button" class="btn btn-close close-btn" (click)="close()">
    <i class="feather icon-x close-icon"></i>
  </button>
</div>
<!-- modal header component -->
<modal-header (saveClick)="formSubmit('SAVE')"
  (continueClick)="formSubmit('CONTINUE')"
  (cancelClick)="close()" [isViewDelete]="false"
  [isViewMore]="false" [isViewContinue]="!viewMode"
  [isViewSave]="!viewMode">
</modal-header>
<div class="row">
  <div class="col-md-12">
    <form [formGroup]="processTransferdetailsForm">
      <div class="p-2 ps-3">
        <div class="row">
          <div class="col-md-6">
            <!-- barcodescan -->
            <div class="row align-items-center " *ngIf="DIAMANFBARCODE">
              <div class="col-sm-2">
                <!-- ./../../assets/images/barcode-scanner.png -->
                <img class="image" width="40px" height="40px"
                  src="../../../../../../assets/images/Icons/barcode-scanner.png" />
              </div>
              <div class="col-sm-6">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <input type="text" matInput
                    [readonly]="viewMode"
                    (focusout)="barcodeNumberValidate($event)"
                    formControlName="barCodeNumber" />
                </mat-form-field>
              </div>
            </div>
            <!-- jobdetails -->
            <div class="row mb-1">
              <label class="col-md-3 col-form-label"
                style="font-weight: bold;">
                Job Number</label>
              <div class="col-md-3">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <input type="text" matInput appNoEmptySpace
                    id="jobNoSearch"
                    autocomplete="off"
                    (keydown)="lookupKeyPress($event,'JOB_NUMBER')"
                    (change)="jobNumberValidate($event)"
                    formControlName="JOB_NUMBER" [readonly]="viewMode" />
                  <mat-error
                    *ngIf="processTransferdetailsForm.controls.JOB_NUMBER.touched && processTransferdetailsForm.controls.JOB_NUMBER.hasError('required')">
                    Job number required
                  </mat-error>
                  <master-search class="masterSearch"
                    [MasterSearchData]="jobNoSearch"
                    *ngIf="!viewMode" #overlayjobNoSearch
                    (newRowClick)="jobNumberSelected($event)">
                  </master-search>
                </mat-form-field>
              </div>
              <div class="col-md-4">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <input type="text" matInput formControlName="JOB_DESCRIPTION"
                    readonly />
                </mat-form-field>
              </div>
              <!-- <div class="col-sm-3">
                <mat-form-field appearance="outline" style="width: 50%;margin-left: 4px;">
                  <input type="text" matInput readonly />
                </mat-form-field>
              </div> -->
            </div>
            <div class="row ">
              <label class="col-md-3 col-form-label">Sub Job
                Number</label>
              <div class="col-md-3">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <input type="text" matInput formControlName="UNQ_JOB_ID"
                    UpperCaseDirective [readonly]="viewMode" id="UNQ_JOB_ID"
                    (keydown)="lookupKeyPress($event,'UNQ_JOB_ID')"
                    (change)="subJobNumberValidate($event)" />
                  <master-search class="masterSearch"
                    [MasterSearchData]="subJobNoSearch"
                    *ngIf="!viewMode" #overlaySubjobNoSearch
                    (newRowClick)="subJobNumberSelected($event)">
                  </master-search>
                </mat-form-field>
              </div>
              <div class="col-md-4">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <input type="text" matInput readonly UpperCaseDirective
                    formControlName="SUB_JOB_DESCRIPTION" />
                </mat-form-field>
              </div>

              <!-- <label class="col-sm-3 col-form-label">
                <b>Issue Ref # </b></label> -->
            </div>
          </div>
          <div class="col-md-4 " style="border: 1px solid #b0b0b0;"
            *ngIf="approvalReqFlag">
            <h6>Approval Details</h6>
            <div class="row mb-2">
              <label for="inputPassword"
                class="col-sm-4 col-form-label">Approved
                By</label>
              <div class="col-sm-6">
                <mat-form-field appearance="outline" style="width: 76%;">
                  <input type="text" matInput UpperCaseDirective
                    (keydown)="lookupKeyPress($event,'APPROVED_USER')"
                    (focusout)="validateLookupField($event,userDetailNet,'APPROVED_USER')"
                    formControlName="APPROVED_USER" [readonly]="viewMode" />
                  <master-search class="masterSearch"
                    [MasterSearchData]="userDetailNet"
                    *ngIf="!viewMode"
                    (newRowClick)="userDetailNetSelected($event)">
                  </master-search>
                </mat-form-field>

              </div>
            </div>
            <div class="row mb-2">
              <label for="inputPassword"
                class="col-sm-4 col-form-label">Approved
                Date</label>
              <div class="col-sm-6">
                <mat-form-field appearance="outline" style="width: 100%">
                  <input matInput DateValidation
                    [matDatepicker]="approveddate"
                    formControlName="approveddate"
                    placeholder="DD/MM/YYYY" />
                  <mat-datepicker-toggle matSuffix
                    [for]="approveddate"></mat-datepicker-toggle>
                  <mat-datepicker #approveddate></mat-datepicker>
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
        <!-- Tab section starts -->
        <mat-tab-group [selectedIndex]="this.divisionMS == 'ID' ? 0 : 1">
          <!-- Diamond section starts -->
          <mat-tab label="Diamond Jewellery" *ngIf="designType == 'DIAMOND'">
            <div class="row">
              <b>Transfer Details</b>
            </div>
            <div class="row">
              <!-- details grid section starts -->
              <div class="col-lg-3 col-md-3 col-sm-12">
                <table>
                  <thead>
                    <tr>
                      <td>
                        <div class="tablerowheading"></div>
                      </td>
                      <th>From</th>
                      <th>To</th>
                    </tr>
                    <ng-container *ngTemplateOutlet="processWorkerOrder() ? workerTemplate : processTemplate">
                    </ng-container>
                    <ng-container *ngTemplateOutlet="processWorkerOrder() ? processTemplate : workerTemplate">
                    </ng-container>
                    <ng-template #processTemplate>
                      <tr>
                        <th>Process</th>
                        <td>
                          <div class="d-flex">
                            <mat-form-field appearance="outline"
                              style="width: 110px;">
                              <input type="text" matInput UpperCaseDirective
                                (keydown)="lookupKeyPress($event,'FRM_PROCESS_CODE')"
                                (focusout)="fromProcesscodeValidate($event)"
                                formControlName="FRM_PROCESS_CODE"
                                (input)="fromProcesscodeInputChange()"
                                [readonly]="viewMode" />
                              <mat-error
                                *ngIf="processTransferdetailsForm.controls.FRM_PROCESS_CODE.touched 
                              && processTransferdetailsForm.controls.FRM_PROCESS_CODE.hasError('required')">
                                code is required
                              </mat-error>
                              <master-search class="masterSearch"
                                *ngIf="!viewMode" #fromProcessMasterOverlay
                                [MasterSearchData]="fromProcessMasterSearch"
                                (newRowClick)="processCodeFromSelected($event)">
                              </master-search>
                            </mat-form-field>
                          </div>
                        </td>
                        <td>
                          <div class="d-flex">
                            <mat-form-field appearance="outline"
                              style="width: 110px;">
                              <input type="text" matInput [readonly]="viewMode"
                                UpperCaseDirective id="TO_PROCESS_CODE"
                                (keydown)="lookupKeyPress($event,'TO_PROCESS_CODE')"
                                (focusout)="toProcesscodeValidate($event)"
                                formControlName="TO_PROCESS_CODE" />
                              <mat-error
                                *ngIf="processTransferdetailsForm.controls.TO_PROCESS_CODE.touched 
                              && processTransferdetailsForm.controls.TO_PROCESS_CODE.hasError('required')">
                                code is required
                              </mat-error>
                              <master-search class="masterSearch"
                                *ngIf="!viewMode" #toProcessMasterOverlay
                                [MasterSearchData]="toProcessMasterSearch"
                                (newRowClick)="processCodeToSelected($event)">
                              </master-search>
                            </mat-form-field>
                          </div>
                        </td>
                      </tr>
                    </ng-template>
                    <ng-template #workerTemplate>
                      <tr>
                        <th>Worker</th>
                        <td>
                          <div class="d-flex">
                            <mat-form-field appearance="outline"
                              style="width: 110px;">
                              <input type="text" matInput [readonly]="viewMode"
                                UpperCaseDirective id="FRM_WORKER_CODE"
                                (keydown)="lookupKeyPress($event,'FRM_WORKER_CODE')"
                                (focusout)="fromWorkercodeValidate($event)"
                                (input)="fromWorkercodeInputChange()"
                                formControlName="FRM_WORKER_CODE" />
                              <mat-error
                                *ngIf="processTransferdetailsForm.controls.FRM_WORKER_CODE.touched 
                              && processTransferdetailsForm.controls.FRM_WORKER_CODE.hasError('required')">
                                code is required
                              </mat-error>
                              <master-search class="masterSearch"
                                *ngIf="!viewMode" #fromWorkerMasterOverley
                                [MasterSearchData]="fromWorkerMasterSearch"
                                (newRowClick)="workerCodeFromSelected($event)">
                              </master-search>
                            </mat-form-field>
                          </div>
                        </td>
                        <td>
                          <div class="d-flex">
                            <mat-form-field appearance="outline"
                              style="width: 110px;">
                              <input type="text" matInput [readonly]="viewMode"
                                UpperCaseDirective id="TO_WORKER_CODE"
                                (keydown)="lookupKeyPress($event,'TO_WORKER_CODE')"
                                (focusout)="toWorkercodeValidate($event)"
                                formControlName="TO_WORKER_CODE" />
                              <mat-error
                                *ngIf="processTransferdetailsForm.controls.TO_WORKER_CODE.touched 
                              && processTransferdetailsForm.controls.TO_WORKER_CODE.hasError('required')">
                                code is required
                              </mat-error>
                              <master-search class="masterSearch"
                                *ngIf="!viewMode" #toWorkerMasterOverley
                                [MasterSearchData]="toWorkerMasterSearch"
                                (newRowClick)="workerCodeToSelected($event)">
                              </master-search>
                            </mat-form-field>

                          </div>
                        </td>
                      </tr>
                    </ng-template>
                    <tr>
                      <td>Metal Pcs</td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 110px;">
                          <input type="text" matInput class="text-right"
                            readonly maxlength="12"
                            formControlName="FRM_METAL_PCS" />
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 110px;">
                          <input type="text" matInput readonly
                            class="text-right"
                            NumberOnly maxlength="12"
                            formControlName="TO_METAL_PCS" />
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr>
                      <td>Metal Weight</td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 110px;">
                          <input type="text" matInput class="text-right"
                            readonly
                            formControlName="FRM_METAL_WT" />
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 110px;">
                          <input type="text" matInput readonly
                            class="text-right"
                            MetalDecimalInput [max]="10"
                            (focusout)="toMetalWeightChange('FRM_METAL_WT','TO_METAL_WT')"
                            formControlName="TO_METAL_WT" />
                        </mat-form-field>
                      </td>
                      <!-- <th colspan="3" class="text-center">Transfer to</th>
                      <th>Loss Qty</th>
                      <td><b>%</b></td>
                      <th rowspan="2" style="text-align: center;">Balance</th> -->
                    </tr>
                    <tr>
                      <td>From Job Pcs</td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 110px;">
                          <input type="text" matInput class="text-right"
                            readonly
                            formControlName="FRM_PCS" />
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 110px;">
                          <input type="text" matInput [readonly]="viewMode"
                            class="text-right" id="TO_PCS"
                            NumberOnly maxlength="10"
                            (focusout)="checkFromToValues('FRM_PCS','TO_PCS')"
                            formControlName="TO_PCS" />
                        </mat-form-field>
                      </td>
                      <!-- <th>Stock Code</th>
                      <th>QTY </th>
                      <th>Location</th>
                      <th>Std.Loss</th>
                      <th>
                        <mat-form-field appearance="outline"
                          style="width: 100px;">
                          <input type="text" matInput readonly
                            class="text-right"
                            formControlName="STD_LOSS" />
                        </mat-form-field>
                      </th> -->
                    </tr>
                    <tr>
                      <th>Gross Weight</th>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 110px;">
                          <input type="text" matInput class="text-right"
                            readonly maxlength="10"
                            formControlName="GrossWeightFrom" />
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 110px;">
                          <input type="text" matInput [readonly]="viewMode"
                            class="text-right" id="GrossWeightTo"
                            MetalDecimalInput [max]="10"
                            (focusout)="GrossWeightToChange($event)"
                            formControlName="GrossWeightTo" />
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr>
                      <td>Stone Pcs</td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 110px;">
                          <input type="text" matInput class="text-right"
                            formControlName="FRM_STONE_PCS" readonly />
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 110px;">
                          <input type="text" matInput readonly
                            class="text-right"
                            formControlName="TO_STONE_PCS" NumberOnly
                            (focusout)="checkFromToValues('FRM_STONE_PCS','TO_STONE_PCS')"
                            maxlength="10" />
                        </mat-form-field>
                      </td>
                      <td style="border: none;"></td>
                      <td style="border: none;"></td>
                      <td style="border: none;">
                        <ng-template *ngIf="false">Stone Pcs</ng-template></td>
                      <td style="border: none;">
                        <ng-template *ngIf="false">
                          <mat-form-field appearance="outline"
                            style="width: 110px;">
                            <input type="text" matInput class="text-right"
                              NumberOnly maxlength="10" [readonly]="viewMode" />
                          </mat-form-field>
                        </ng-template>
                      </td>
                    </tr>
                    <tr>
                      <td>Stone Weight</td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 110px;">
                          <input type="text" matInput class="text-right"
                            readonly formControlName="FRM_STONE_WT" />
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 110px;">
                          <input type="text" matInput readonly
                            class="text-right"
                            StoneDecimalInput [max]="10"
                            (focusout)="checkFromToValues('FRM_STONE_WT','TO_STONE_WT')"
                            formControlName="TO_STONE_WT" />
                        </mat-form-field>
                      </td>
                      <td style="border: none;"></td>
                      <td style="border: none;"></td>
                      <!-- need tochange -->
                      <td style="border: none;">
                        <ng-template *ngIf="false">
                          Stone Weight
                        </ng-template>
                      </td>
                      <td style="border: none;">
                        <ng-template *ngIf="false">
                          <mat-form-field appearance="outline"
                            style="width: 110px;">
                            <input type="text" matInput [readonly]="viewMode"
                              class="text-right"
                              StoneDecimalInput [max]="10" />
                          </mat-form-field>
                        </ng-template>
                      </td>
                    </tr>
                  </thead>
                </table><br><br>
              </div>
              <!-- scrap and losss section starts -->
              <div class="col-lg-7 col-md-7 col-sm-12 p-0 m-0">
                <div class="row">
                  <div class="col-md-9">
                    <table>
                      <thead>
                        <tr>
                          <th colspan="3" class="text-center">Transfer to</th>
                          <th>Loss Qty</th>
                          <th><b>Loss %</b></th>
                          <th rowspan="2"
                            style="text-align: center;">Balance</th>
                        </tr>
                        <tr>
                          <th>Stock Code</th>
                          <th>QTY </th>
                          <th>Location</th>
                          <th>Std.Loss</th>
                          <!-- STD_LOSS -->
                          <th>
                            <mat-form-field appearance="outline"
                              style="width: 100px;">
                              <input type="text" matInput readonly
                                NumberOnly
                                class="text-right"
                                formControlName="STD_LOSS" />
                            </mat-form-field>
                          </th>
                        </tr>
                        <tr>
                          <!-- stockcode -->
                          <td>
                            <mat-form-field appearance="outline"
                              style="width: 100px;">
                              <input type="text" matInput maxlength="15"
                                (keydown)="lookupKeyPress($event,'stockCode')"
                                (focusout)="stockCodeScrapValidate($event)"
                                formControlName="stockCode" id="stockCode"
                                [readonly]="viewMode" UpperCaseDirective />
                              <master-search class="masterSearch"
                                *ngIf="!viewMode"
                                [MasterSearchData]="stockCodeSearch"
                                #stockCodeOverlay
                                (newRowClick)="stockCodeSelected($event)">
                              </master-search>
                            </mat-form-field>

                          </td>
                          <!-- quantity -->
                          <td>
                            <mat-form-field appearance="outline"
                              style="width: 100px;">
                              <input type="text" matInput
                                [readonly]="viewMode || !locationSearchFlag"
                                class="text-right"
                                (focusout)="scrapWeightChange($event)"
                                formControlName="scrapWeight" MetalDecimalInput
                                maxlength="10" />
                            </mat-form-field>
                          </td>
                          <!-- location -->
                          <td>
                            <mat-form-field appearance="outline"
                              style="width: 100px;">
                              <input type="text" matInput
                                maxlength="15" UpperCaseDirective
                                (keydown)="lookupKeyPress($event,'location')"
                                (change)="locationCodeValidate($event)"
                                formControlName="location" />
                              <master-search class="masterSearch"
                                *ngIf="locationSearchFlag" #overleyLocation
                                [MasterSearchData]="locationSearch"
                                (newRowClick)="locationSelected($event)">
                              </master-search>
                            </mat-form-field>
                          </td>
                          <!-- lossQty -->
                          <td>
                            <mat-form-field appearance="outline"
                              style="width: 100px;">
                              <input type="text" matInput [readonly]="viewMode"
                                class="text-right" id="txtLossQty"
                                MetalDecimalInput [max]="10"
                                (change)="lossQtyChange($event)"
                                formControlName="lossQty" />
                            </mat-form-field>
                          </td>
                          <!-- stdLossper -->
                          <td>
                            <mat-form-field appearance="outline"
                              style="width: 100px;">
                              <input type="text" matInput readonly
                                NumberOnly
                                formControlName="lossQtyper"
                                class="text-right" />
                            </mat-form-field>
                          </td>
                          <!-- balance wt -->
                          <td>
                            <mat-form-field appearance="outline"
                              style="width: 100px;">
                              <input type="text" matInput readonly
                                maxlength="10"
                                formControlName="Balance_WT" NumberOnly
                                class="text-right" />
                            </mat-form-field>
                          </td>
                        </tr>
                      </thead>
                    </table>
                  </div>
                </div>
                <div class="row pt-4">
                  <div class="col-md-4">
                    <div class="row mb-2">
                      <label for="input" class="col-sm-4 col-form-label">Start
                        Date</label>
                      <div class="col-sm-7">
                        <!-- <mat-form-field appearance="outline" style="width: 100%;">
                          <input type="date" matInput formControlName="startdate"
                            id="startdate" (focusout)="onStartDateChange()" />
                        </mat-form-field> -->
                        <mat-form-field appearance="outline"
                          style="width: 100%">
                          <input matInput DateValidation
                            (dateChange)="onStartDateChange()"
                            [matDatepicker]="start" formControlName="startdate"
                            placeholder="DD/MM/YYYY" />
                          <mat-datepicker-toggle matSuffix
                            [for]="start"></mat-datepicker-toggle>
                          <mat-datepicker #start></mat-datepicker>
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="row mb-2">
                      <label for="input" class="col-sm-4 col-form-label">End
                        Date</label>
                      <div class="col-sm-7">
                        <mat-form-field appearance="outline"
                          style="width: 100%">
                          <input matInput DateValidation
                            [matDatepicker]="end" formControlName="enddate"
                            placeholder="DD/MM/YYYY" [min]="minEndDate" />
                          <mat-datepicker-toggle matSuffix
                            [for]="end"></mat-datepicker-toggle>
                          <mat-datepicker #end></mat-datepicker>
                        </mat-form-field>
                      </div>
                      <div
                        *ngIf="processTransferdetailsForm.hasError('dateError')">
                        <p class="error-message">End date cannot be before the
                          start
                          date.</p>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="row mb-2">
                      <label for="input" class="col-sm-4 col-form-label">
                        Std Time</label>
                      <div class="col-sm-7">
                        <mat-form-field appearance="outline"
                          style="width: 70%;">
                          <input type="text" matInput formControlName="STD_TIME"
                            readonly />
                        </mat-form-field>
                        <!-- <datetime-picker [DateTimeModelData]="STDDateTimeData"
                          (datetimeClick)="stdTimeChange($event)"
                          (updateDuration)="StdTimeInMinutes($event)">
                        </datetime-picker> -->
                      </div>
                    </div>
                    <div class="row mb-2">
                      <label for="input" class="col-sm-4 col-form-label">Time
                        Taken</label>
                      <div class="col-sm-7">
                        <mat-form-field appearance="outline"
                          style="width: 70%;">
                          <input type="text" matInput
                            formControlName="TIME_TAKEN_HRS"
                            readonly />
                        </mat-form-field>
                        <!-- <datetime-picker [DateTimeModelData]="TimeTakenData"
                          (datetimeClick)="timeTakenChange($event)"
                          (updateDuration)="timeTakenInMinutes($event)">
                        </datetime-picker> -->
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="row mb-2">
                      <label for="input"
                        class="col-sm-4 col-form-label">Consumed</label>
                      <div class="col-sm-7">
                        <mat-form-field appearance="outline"
                          style="width: 70%;">
                          <input type="text" matInput
                            formControlName="TIME_CONSUMED" readonly />
                          <datetime-picker class="masterSearch"
                            [DateTimeModelData]="consumedTimeData"
                            *ngIf="!viewMode"
                            (datetimeClick)="consumedChange($event)"
                            (updateDuration)="consumedInMinutes($event)">
                          </datetime-picker>
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="row mb-3">
                      <label for="input"
                        class="col-sm-4 col-form-label">Variance
                        %</label>
                      <div class="col-sm-4">
                        <mat-form-field appearance="outline"
                          style="width: 100%;">
                          <input type="text" matInput readonly
                            formControlName="variancePercentage"
                            class="text-right" />
                        </mat-form-field>
                      </div>
                      <div class="col-sm-4">
                        <mat-form-field appearance="outline"
                          style="width: 100%;">
                          <input type="text" matInput readonly
                            formControlName="variance"
                            class="text-right" />
                        </mat-form-field>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-4">
                    <div class="row mb-2">
                      <label for="input" class="col-sm-4 col-form-label">Tree
                        No</label>
                      <div class="col-sm-7">
                        <mat-form-field appearance="outline"
                          style="width: 100%;">
                          <input type="text" matInput formControlName="TREE_NO"
                            class="text-right" NumberOnly maxlength="10"
                            [readonly]="viewMode" />
                        </mat-form-field>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-7">
                    <div class="form-check">
                      <mat-checkbox formControlName="SETTED_FLAG"
                        [disabled]="viewMode"
                        (change)="selectAllBtnChange($event)">Select All Setted
                      </mat-checkbox>
                    </div>
                  </div>
                </div>
              </div>
              <!-- image and designid section starts -->
              <div class="col-lg-2 col-md-2 col-sm-12">
                <div class="row  d-flex justify-content-center">
                  <div class="square-box">
                    <image-slider [imageArray]="imagepath"></image-slider>
                  </div>
                </div>
                <div class="row mb-1 d-flex justify-content-center">
                  <mat-form-field appearance="outline" style="width: 70%;">
                    <input type="text" matInput formControlName="DESIGN_CODE"
                      readonly />
                  </mat-form-field>
                </div>
                <div class="row d-flex justify-content-center">
                  <mat-form-field appearance="outline" style="width: 70%;">
                    <input type="text" matInput formControlName="partCode"
                      readonly />
                  </mat-form-field>
                </div>
              </div>
            </div>

          </mat-tab>
          <!--*** METAL TAB section starts ***-->
          <mat-tab label="Metal Jewellery" *ngIf="designType == 'METAL'">
            <div class="row">
              <div class="p-3">
                <b>Transfer Details</b>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-6 col-md-6 col-sm-12">
                <table>
                  <thead>
                    <tr>
                      <td>
                        <div class="tablerowheading"></div>
                      </td>
                      <th>From</th>
                      <th>To</th>
                      <th rowspan="2">Transfer to Stock</th>
                      <th>Std Loss</th>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput class="text-right"
                            MetalDecimalInput
                            formControlName="METAL_STD_LOSS" />
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr>
                      <th>Process</th>
                      <td>
                        <span>
                          <mat-form-field appearance="outline"
                            style="width: 130px;">
                            <input type="text" matInput
                              (focusout)="fromProcesscodeValidate($event)"
                              id="METAL_FRM_PROCESS_CODE" UpperCaseDirective
                              formControlName="METAL_FRM_PROCESS_CODE"
                              (input)="fromProcesscodeInputChange()"
                              (keydown)="lookupKeyPress($event,'METAL_FRM_PROCESS_CODE')">
                            <master-search class="masterSearch"
                              *ngIf="!viewMode" #MetalfromProcessMasterOverlay
                              [MasterSearchData]="fromProcessMasterSearch"
                              (newRowClick)="metalprocessCodeFromSelected($event)">
                            </master-search>
                          </mat-form-field>

                        </span>
                      </td>
                      <td>
                        <span>
                          <mat-form-field appearance="outline"
                            style="width: 130px;">
                            <input type="text" matInput [readonly]="viewMode"
                              (keydown)="lookupKeyPress($event,'METAL_TO_PROCESS_CODE')"
                              (focusout)="toProcesscodeValidate($event)"
                              formControlName="METAL_TO_PROCESS_CODE"
                              id="METAL_TO_PROCESS_CODE"
                              UpperCaseDirective />
                            <master-search class="masterSearch"
                              *ngIf="!viewMode" #MetaltoProcessMasterOverlay
                              [MasterSearchData]="toProcessMasterSearch"
                              (newRowClick)="metalprocessCodeToSelected($event)">
                            </master-search>
                          </mat-form-field>
                        </span>
                      </td>
                      <td>Act. Loss</td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput maxlength="10"
                            (focusout)="txtLossBooked_Validating()"
                            MetalDecimalInput
                            formControlName="METAL_LossBooked"
                            class="text-right" />
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr><!-- worker row starts-->
                      <th>Worker</th>
                      <td>
                        <span>
                          <mat-form-field appearance="outline"
                            style="width: 130px;">
                            <input type="text" matInput
                              (keydown)="lookupKeyPress($event,'METAL_FRM_WORKER_CODE')"
                              formControlName="METAL_FRM_WORKER_CODE"
                              id="METAL_FRM_WORKER_CODE"
                              (input)="fromWorkercodeInputChange()"
                              (focusout)="fromWorkercodeValidate($event)" />
                            <master-search class="masterSearch"
                              *ngIf="!viewMode" #MetalfromWorkerMasterOverley
                              [MasterSearchData]="fromWorkerMasterSearch"
                              (newRowClick)="metalworkerCodeFromSelected($event)">
                            </master-search>
                          </mat-form-field>

                        </span>
                      </td>
                      <td>
                        <span>
                          <mat-form-field appearance="outline"
                            style="width: 130px;">
                            <input type="text" matInput UpperCaseDirective
                              (keydown)="lookupKeyPress($event,'METAL_TO_WORKER_CODE')"
                              formControlName="METAL_TO_WORKER_CODE"
                              id="METAL_TO_WORKER_CODE"
                              (focusout)="toWorkercodeValidate($event)" />
                            <master-search class="masterSearch"
                              *ngIf="!viewMode" #MetaltoWorkerMasterOverley
                              [MasterSearchData]="toWorkerMasterSearch"
                              (newRowClick)="metalworkerCodeToSelected($event)">
                            </master-search>
                          </mat-form-field>
                        </span>
                      </td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput
                            UpperCaseDirective
                            (keydown)="lookupKeyPress($event,'METAL_ScrapLocCode')"
                            (change)="locationCodeValidate($event)"
                            formControlName="METAL_ScrapLocCode"
                            id="METAL_ScrapLocCode" />
                          <master-search class="masterSearch"
                            #overleyLocation
                            [MasterSearchData]="locationSearch"
                            (newRowClick)="metallocationSelected($event)">
                          </master-search>
                        </mat-form-field>
                      </td>
                      <th>Gain</th>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput class="text-right"
                            MetalDecimalInput
                            formControlName="METAL_GainGrWt" />
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr><!-- Stock Code row starts-->
                      <td>Stock Code</td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput
                            readonly id="METAL_FromStockCode"
                            formControlName="METAL_FromStockCode" />
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput
                            UpperCaseDirective
                            (keydown)="lookupKeyPress($event,'METAL_ToStockCode')"
                            (focusout)="MToStockCode_Validating($event)"
                            id="METAL_ToStockCode"
                            formControlName="METAL_ToStockCode" />
                          <master-search class="masterSearch"
                            *ngIf="!viewMode" #METAL_ToStockCodeOverley
                            [MasterSearchData]="metalScrapStockCode"
                            (newRowClick)="metalToStockCodeSelected($event)">
                          </master-search>
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput
                            formControlName="METAL_ScrapStockCode"
                            UpperCaseDirective id="METAL_ScrapStockCode"
                            (keydown)="lookupKeyPress($event,'METAL_ScrapStockCode')"
                            (focusout)="txtMScrapStockCode_Validating($event)" />
                          <master-search #METAL_ScrapStockCodeoverlay
                            class="masterSearch"
                            *ngIf="!viewMode"
                            [MasterSearchData]="metalScrapStockCode"
                            (newRowClick)="metalScrapStockCodeSelected($event)">
                          </master-search>
                        </mat-form-field>
                      </td>
                      <td colspan="2">Balance</td>
                    </tr>
                    <tr><!-- PCS row starts-->
                      <td>PCS</td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput class="text-right"
                            NumberOnly readonly
                            formControlName="METAL_FromPCS" />
                        </mat-form-field>
                      </td>
                      <td>
                        <!-- metal to pcs -->
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput class="text-right"
                            NumberOnly
                            (focusout)="MToPCS_Validating()"
                            formControlName="METAL_ToPCS" />
                        </mat-form-field>
                      </td>
                      <!-- scrap pcs -->
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput class="text-right"
                            NumberOnly
                            (focusout)="MScrapPCS_Validating()"
                            formControlName="METAL_ScrapPCS" />
                        </mat-form-field>
                      </td>
                      <td colspan="2">
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput class="text-right"
                            NumberOnly readonly
                            formControlName="METAL_BalPCS" />
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr><!-- Gross Weight starts-->
                      <th>Gross Weight</th>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput class="text-right"
                            MetalDecimalInput readonly
                            formControlName="METAL_GrossWeightFrom" />
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput class="text-right"
                            MetalDecimalInput
                            (focusout)="MToGrossWt_Validating()"
                            formControlName="METAL_GrossWeightTo" />
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput MetalDecimalInput
                            (focusout)="txtMScrapGrWt_Validating()"
                            formControlName="METAL_ScrapGrWt"
                            class="text-right" />
                        </mat-form-field>
                      </td>
                      <td colspan="2">
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput class="text-right"
                            readonly
                            formControlName="METAL_BalGrWt" />
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr><!-- Stone Weight starts-->
                      <td>Stone Weight</td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput class="text-right"
                            StoneDecimalInput readonly
                            formControlName="METAL_FRM_STONE_WT" />
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput class="text-right"
                            StoneDecimalInput
                            (focusout)="MToStoneWt_Validating()"
                            formControlName="METAL_TO_STONE_WT" />
                        </mat-form-field>
                      </td>
                      <!-- ScrapStoneWt -->
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput StoneDecimalInput
                            (focusout)="txtMScrapStoneWt_Validating()"
                            formControlName="METAL_ScrapStoneWt"
                            class="text-right" />
                        </mat-form-field>
                      </td>
                      <!-- BalStoneWt -->
                      <td colspan="2">
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput readonly
                            formControlName="METAL_BalStoneWt"
                            class="text-right" />
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr><!-- Iron Weight starts-->
                      <td>Iron Weight</td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput class="text-right"
                            formControlName="METAL_FromIronWeight"
                            MetalDecimalInput readonly />
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput class="text-right"
                            formControlName="METAL_ToIronWt" MetalDecimalInput
                            (focusout)="txtToIronWt_Validating()" />
                        </mat-form-field>
                      </td>
                      <!-- ToIronScrapWt -->
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput class="text-right"
                            (focusout)="txtToIronScrapWt_Validating()"
                            formControlName="METAL_ToIronScrapWt"
                            MetalDecimalInput />
                        </mat-form-field>
                      </td>
                      <!-- BalIronWt -->
                      <td colspan="2">
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput class="text-right"
                            formControlName="METAL_BalIronWt"
                            readonly />
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr><!-- Net Weight starts-->
                      <td>Net Weight</td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput class="text-right"
                            readonly
                            formControlName="METAL_FromNetWeight" />
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput class="text-right"
                            readonly
                            formControlName="METAL_ToNetWt" />
                        </mat-form-field>
                      </td>
                      <!-- METAL_ScrapNetWt -->
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput readonly
                            class="text-right"
                            formControlName="METAL_ScrapNetWt" />
                        </mat-form-field>
                      </td>
                      <!-- BalNetWt -->
                      <td colspan="2">
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput readonly
                            class="text-right"
                            formControlName="METAL_BalNetWt" />
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr><!-- Pure Weight starts-->
                      <td>Pure Weight</td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput class="text-right"
                            MetalDecimalInput readonly
                            formControlName="METAL_FromPureWt" />
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput class="text-right"
                            readonly
                            formControlName="METAL_ToPureWt" />
                        </mat-form-field>
                      </td>
                      <!-- ScrapPureWt -->
                      <td>
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput readonly
                            class="text-right"
                            formControlName="METAL_ScrapPureWt" />
                        </mat-form-field>
                      </td>
                      <td colspan="2">
                        <mat-form-field appearance="outline"
                          style="width: 130px;">
                          <input type="text" matInput readonly
                            formControlName="METAL_BalPureWt"
                            class="text-right" />
                        </mat-form-field>
                      </td>
                    </tr>
                  </thead>
                </table><br><br>
                <!-- Table metal transfer details Ends -->
              </div>
              <div class="col-lg-5 col-md-5 col-sm-12">
                <div class="row pt-2">
                  <div class="col-md-6">
                    <div class="row mb-2">
                      <label for="input" class="col-sm-4 col-form-label">Start
                        Date</label>
                      <div class="col-sm-7">
                        <!-- <mat-form-field appearance="outline" style="width: 100%;">
                          <input type="date" matInput formControlName="startdate"
                            id="startdate" (focusout)="onStartDateChange()" />
                        </mat-form-field> -->
                        <mat-form-field appearance="outline"
                          style="width: 100%">
                          <input matInput DateValidation
                            (dateChange)="onStartDateChange()"
                            [matDatepicker]="start" formControlName="startdate"
                            placeholder="DD/MM/YYYY" />
                          <mat-datepicker-toggle matSuffix
                            [for]="start"></mat-datepicker-toggle>
                          <mat-datepicker #start></mat-datepicker>
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="row mb-2">
                      <label for="input" class="col-sm-4 col-form-label">End
                        Date</label>
                      <div class="col-sm-7">
                        <mat-form-field appearance="outline"
                          style="width: 100%">
                          <input matInput DateValidation
                            [matDatepicker]="end" formControlName="enddate"
                            placeholder="DD/MM/YYYY" [min]="minEndDate" />
                          <mat-datepicker-toggle matSuffix
                            [for]="end"></mat-datepicker-toggle>
                          <mat-datepicker #end></mat-datepicker>
                        </mat-form-field>
                      </div>
                      <div
                        *ngIf="processTransferdetailsForm.hasError('dateError')">
                        <p class="error-message">End date cannot be before the
                          start
                          date.</p>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="row mb-2">
                      <label for="input" class="col-sm-4 col-form-label">
                        Std Time</label>
                      <div class="col-sm-7">
                        <mat-form-field appearance="outline"
                          style="width: 70%;">
                          <input type="text" matInput formControlName="STD_TIME"
                            readonly />
                        </mat-form-field>
                        <!-- <datetime-picker [DateTimeModelData]="STDDateTimeData"
                          (datetimeClick)="stdTimeChange($event)"
                          (updateDuration)="StdTimeInMinutes($event)">
                        </datetime-picker> -->
                      </div>
                    </div>
                    <div class="row mb-2">
                      <label for="input" class="col-sm-4 col-form-label">Time
                        Taken</label>
                      <div class="col-sm-7">
                        <mat-form-field appearance="outline"
                          style="width: 70%;">
                          <input type="text" matInput
                            formControlName="TIME_TAKEN_HRS"
                            readonly />
                        </mat-form-field>
                        <!-- <datetime-picker [DateTimeModelData]="TimeTakenData"
                          (datetimeClick)="timeTakenChange($event)"
                          (updateDuration)="timeTakenInMinutes($event)">
                        </datetime-picker> -->
                      </div>
                    </div>
                  </div>

                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="row mb-3">
                      <label for="input"
                        class="col-sm-4 col-form-label">Variance
                        %</label>
                      <div class="col-sm-4">
                        <mat-form-field appearance="outline"
                          style="width: 100%;">
                          <input type="text" matInput readonly
                            formControlName="variancePercentage"
                            class="text-right" AmountDecimalInput [max]="3" />
                        </mat-form-field>
                      </div>
                      <div class="col-sm-4">
                        <mat-form-field appearance="outline"
                          style="width: 100%;">
                          <input type="text" matInput readonly
                            formControlName="variance"
                            class="text-right" />
                        </mat-form-field>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="row mb-2">
                      <label for="input"
                        class="col-sm-4 col-form-label">Consumed</label>
                      <div class="col-sm-7">
                        <mat-form-field appearance="outline"
                          style="width: 70%;">
                          <input type="text" matInput
                            formControlName="consumed" readonly />
                          <datetime-picker class="masterSearch"
                            [DateTimeModelData]="consumedTimeData"
                            *ngIf="!viewMode"
                            (datetimeClick)="consumedChange($event)"
                            (updateDuration)="consumedInMinutes($event)">
                          </datetime-picker>
                        </mat-form-field>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-7">
                    <div class="form-check">
                      <mat-checkbox
                        [disabled]="viewMode"
                        (change)="selectAllBtnChange($event)">Select All Setted
                      </mat-checkbox>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </mat-tab>
        </mat-tab-group>
        <div class="row py-2 border-top">
          <div class="col-md-12">
            <dx-data-grid #dataGrid id="gridContainer"
              [showBorders]="true" [dataSource]="metalDetailData"
              [columnAutoWidth]="true"
              [allowColumnResizing]="true"
              (onEditingStart)="onEditingStart($event)"
              [showRowLines]="true" (onRowUpdated)="onRowUpdateGrid($event)">
              <dxo-paging [enabled]="true" [pageSize]="5"></dxo-paging>
              <dxo-editing mode="cell" [allowUpdating]="true">
              </dxo-editing>
              <dxo-selection mode="single"></dxo-selection>
              <dxi-column width="auto" dataField="SELECTED" caption
                cellTemplate="SELECTEDTemplate"
                alignment="right"></dxi-column>
              <div *dxTemplate="let data of 'SELECTEDTemplate'">
                <mat-checkbox [checked]="data.value"
                  [disabled]="compSelectFlag"
                  (change)="changeSelectCheckbox(data)"></mat-checkbox>
              </div>
              <dxi-column dataField="DIVCODE" caption="Div"
                [allowEditing]="false" alignment="left"></dxi-column>
              <dxi-column dataField="STOCK_CODE" caption="Stock Code"
                [allowEditing]="false" alignment="left"></dxi-column>
              <dxi-column dataField="COLOR" caption="Color"
                [allowEditing]="false" alignment="left"></dxi-column>
              <dxi-column dataField="CLARITY" caption="Clarity"
                [allowEditing]="false" alignment="left"></dxi-column>
              <dxi-column dataField="SIZE" caption="Size"
                [allowEditing]="false" alignment="left"></dxi-column>
              <dxi-column dataField="SHAPE" caption="Shape"
                [allowEditing]="false" alignment="left"></dxi-column>
              <dxi-column dataField="PCS" caption="Pcs"
                dataType="number"
                alignment="right" [allowEditing]="!viewMode"></dxi-column>
              <dxi-column dataField="FRM_PCS" caption="Setted"
                dataType="number"
                alignment="right" [allowEditing]="!viewMode"></dxi-column>
              <dxi-column dataField="GROSS_WT" caption="Weight"
                alignment="right" [allowEditing]="!viewMode"></dxi-column>
              <dxi-column dataField="LOSS_QTY" caption="Loss"
                dataType="number"
                [allowEditing]="false" alignment="right"></dxi-column>
              <dxi-column dataField="Div" caption="Gain Wt"
                [allowEditing]="false" alignment="right"></dxi-column>
              <dxi-column dataField="Type" caption="Type"
                [allowEditing]="false" alignment="right"></dxi-column>
              <dxi-column dataField="RATE" caption="Rate"
                [allowEditing]="false" alignment="right"></dxi-column>
              <dxi-column dataField="AMOUNTFC" caption="Amount"
                [allowEditing]="false" alignment="right"></dxi-column>
              <dxi-column dataField="SETTED_FLAG" [allowEditing]="false"
                caption="Setted" alignment="center"
                cellTemplate="Setted">
                <div *dxTemplate="let data1 of 'Setted'">
                  <input type="checkbox" [disabled]="viewMode"
                    [checked]="data1.value"
                    (focusout)="settedCheckbox(data1)" />
                </div>
              </dxi-column>
              <dxi-column dataField="GEN" caption="Setting Type"
                alignment="left">
                <dxo-lookup [dataSource]="ProcessTypeList"
                  displayExpr="type"
                  valueExpr="type">
                </dxo-lookup>
              </dxi-column>
              <dxi-column dataField="SIEVE_SET" caption="Sieve Set"
                [allowEditing]="false" alignment="left"></dxi-column>
              <dxi-column dataField="GROSS_WT" caption="Issue Gross Wt"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="STONE_WT" caption="Issue Stone Wt"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="NET_WT" caption="Issue Net Wt"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="KARAT_CODE" caption="Karat"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="PURITY" caption="Purity"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="PUREWT" caption="Gain Pure Wt"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="VOCNO" caption="Voucher Number"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="VOCTYPE" caption="Voucher Type"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="VOCDATE" caption="Voucher Date"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="JOB_NUMBER" caption="Job Number"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="JOB_SO_NUMBER" caption="Job So Number"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="UNQ_JOB_ID" caption="Unq Job ID"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="JOB_DESCRIPTION" caption="Job Description"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="BRANCH_CODE" caption="BRANCH_CODE"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="DESIGN_CODE" caption="DESIGN_CODE"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="METALSTONE" caption="METALSTONE"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="DIVCODE" caption="DIVCODE"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="STOCK_CODE" caption="STOCK_CODE"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="STOCK_DESCRIPTION"
                caption="STOCK_DESCRIPTION"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="COLOR" caption="COLOR"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="CLARITY" caption="CLARITY"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="SHAPE" caption="SHAPE"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="SIZE" caption="SIZE"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="PCS" caption="PCS"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="GROSS_WT" caption="GROSS WT"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="Rate" caption="Rate"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="Amount" caption="Amount"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="PROCESS_CODE" caption="Process Code"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="WORKER_CODE" caption="Worker Code"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="UNQ_DESIGN_ID" caption="Unq Design Id"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="REFMID" caption="RefMID"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="AMOUNTLC" caption="Amount LC"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="AMOUNTFC" caption="Amount FC"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="WASTAGE_QTY" caption="Wastage Qty"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="WASTAGE_PER" caption="Wastage Per"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="WASTAGE_AMT" caption="Wastage Amt"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="CURRENCY_CODE" caption="Currency Code"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="CURRENCY_RATE" caption="Currency Rate"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="YEARMONTH" caption="YEARMONTH"
                alignment="center" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="LOSS_QTY" caption="LOSS QTY"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="LABOUR_CODE" caption="LABOUR CODE"
                alignment="center" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="LAB_RATE" caption="LAB RATE"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="LAB_AMT" caption="LAB AMT"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="BRKSTN STOCK CODE"
                caption="BRKSTN_STOCK_CODE" alignment="center"
                [allowEditing]="false"></dxi-column>
              <dxi-column dataField="BRKSTN_DIVISION_CODE"
                caption="BRKSTN_DIVISION_CODE" alignment="center"
                [allowEditing]="false"></dxi-column>
              <dxi-column dataField="BRKSTN_WEIGHT" caption="BRKSTN WEIGHT"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="BRKSTN_RATEFC" caption="BRKSTN RATEFC"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="BRKSTN_RATELC" caption="BRKSTN RATELC"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="BRKSTN_AMTFC" caption="BRKSTN AMTLC"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="MAIN_WORKER" caption="MAIN WORKER"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="FRM_WORKER" caption="FRM WORKER"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="FRM_PROCESS" caption="FRM PROCESS"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="CRACCODE" caption="CRACCODE"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="LAB_ACCODE" caption="LAB ACCODE"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="LAB_AMTFC" caption="LAB AMTFC"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="TO_PROCESS" caption="TO PROCESS"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="TO_WORKER" caption="TO WORKER"
                alignment="left" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="LAB_RATEFC" caption="Lab Rate FC"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="RATEFC" caption="Rate FC"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="PRINTED" [allowEditing]="false"
                caption="Printed" alignment="center"
                cellTemplate="Printed">
                <div *dxTemplate="let data1 of 'Printed'">
                  <input type="checkbox" disabled="true"
                    [checked]="data1.value" />
                </div>
              </dxi-column>

              <dxi-column dataField="PUREWT" caption="PUREWT"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="SQLID" caption="ISBROCKEN"
                alignment="center" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="TREE_NO" caption="TREE NO"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="SETTED" caption="SETTED"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="SIEVE" caption="SIEVE"
                alignment="center" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="FULL_RECOVERY" caption="FULL RECOVERY"
                alignment="center" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="RECOVERY_DATE" caption="RECOVERY DATE"
                alignment="center" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="RECOV_LOSS" caption="RECOV LOSS"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="RECOV_LOSS_PURE" caption="RECOV LOSS PURE"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="STONE_WT" caption="STONE WT"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="SYSTEM_DATE" caption="SYSTEM DATE"
                alignment="center" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="BROKENSTONE_PCS" caption="BROKENSTONE PCS"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="BROKENSTONE_WT" caption="BROKENSTONE WT"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="PUREWTTEMP" caption="PUREWTTEMP"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="ISMISSING" caption="ISMISSING"
                alignment="center" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="IS_AUTHORISE" [allowEditing]="false"
                caption="IS AUTHORISE" alignment="center"
                cellTemplate="IS_AUTHORISE">
                <div *dxTemplate="let data1 of 'IS_AUTHORISE'">
                  <input type="checkbox"
                    [checked]="data1.value" disabled="true" />
                </div>
              </dxi-column>
              <dxi-column dataField="SCRAP_STOCK_CODE"
                caption="SCRAP_STOCK_CODE" alignment="center"
                [allowEditing]="false"></dxi-column>
              <dxi-column dataField="SCRAP_SUB_STOCK_CODE"
                caption="SCRAP_SUB_STOCK_CODE" alignment="center"
                [allowEditing]="false"></dxi-column>
              <dxi-column dataField="SCRAP_PURITY" caption="SCRAP_PURITY"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="SCRAP_WT" caption="SCRAP_WT"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="SCRAP_PURE_WT" caption="SCRAP_PURE_WT"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="SCRAP_PUDIFF" caption="SCRAP_PUDIFF"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="SCRAP_ACCODE" caption="SCRAP_ACCODE"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="JOB_PCS" caption="JOB_PCS"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="TO_STOCK_CODE" caption="TO_STOCK_CODE"
                alignment="center" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="FROM_STOCK_CODE" caption="FROM_STOCK_CODE"
                alignment="center" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="FROM_SUB_STOCK_CODE"
                caption="FROM_SUB_STOCK_CODE" alignment="center"
                [allowEditing]="false"></dxi-column>
              <dxi-column dataField="LOSS_PURE_WT" caption="LOSS_PURE_WT"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="IRON_SCRAP_WT" caption="IRON_SCRAP_WT"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="EXCLUDE_TRANSFER_WT" [allowEditing]="false"
                caption="EXCLUDE TRANSFER WT" alignment="center"
                cellTemplate="EXCLUDE_TRANSFER_WT">
                <div *dxTemplate="let data1 of 'EXCLUDE_TRANSFER_WT'">
                  <input type="checkbox"
                    [checked]="data1.value" disabled="true" />
                </div>
              </dxi-column>
              <dxi-column dataField="IRON_WT" caption="IRON_WT"
                alignment="right" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="AUTORIZE_TIME" caption="AUTORIZE_TIME"
                alignment="center" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="IS_REJECT" [allowEditing]="false"
                caption="IS_REJECT" alignment="center"
                cellTemplate="IS_REJECT">
                <div *dxTemplate="let data1 of 'IS_REJECT'">
                  <input type="checkbox" disabled="true"
                    [checked]="data1.value" />
                </div>
              </dxi-column>
              <dxi-column dataField="REASON" caption="REASON"
                alignment="center" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="REJ_REMARKS" caption="REJ_REMARKS"
                alignment="center" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="ATTACHMENT_FILE" caption="ATTACHMENT_FILE"
                alignment="center" [allowEditing]="false"></dxi-column>
              <dxi-column dataField="REPAIR_PROCESS" [allowEditing]="false"
                caption="REPAIR_PROCESS" alignment="center"
                cellTemplate="REPAIR_PROCESS">
                <div *dxTemplate="let data1 of 'REPAIR_PROCESS'">
                  <input type="checkbox" disabled="true"
                    [checked]="data1.value" />
                </div>
              </dxi-column>
            </dx-data-grid>
            <!--  backgroundcolor="#000" -->
          </div>
          <div class="col-md-4">
            <div class="row my-2">
              <label for="inputPassword" class="col-sm-3 col-form-label">Remarks
                :</label>
              <div class="col-md-9">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <input type="text" matInput formControlName="remarks"
                    [readonly]="viewMode" maxlength="100" />
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>

<ng-template #transferDetails let-modal modal-lg>
  <div class="card-content border-bottom d-flex justify-content-between p-2">
    <h5>Select Details</h5>
    <!-- <button type="button" class="btn btn-close close-btn"
      (click)="modal.dismiss('Cross click')">
      <i class="feather icon-x close-icon"></i>
    </button> -->
  </div>
  <div class="row p-2">
    <dx-data-grid id="gridContainer" [columnAutoWidth]="true"
      [allowColumnResizing]="true" [showBorders]="true"
      [showRowLines]="true"
      (onRowClick)="onRowClickHandler($event)"
      [dataSource]="subJobDetailData">
      <dxo-filter-row [visible]="true"></dxo-filter-row>
      <dxo-selection mode="single"></dxo-selection>
      <dxi-column caption="PROCESS" dataField="PROCESS">
      </dxi-column>
      <dxi-column caption="WORKER" dataField="WORKER">
      </dxi-column>
      <dxi-column caption="METAL" dataField="METAL" alignment="right">
      </dxi-column>
      <dxi-column caption="STONE" dataField="STONE" alignment="right">
      </dxi-column>
    </dx-data-grid>
  </div>
</ng-template>